{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///c:/Users/HP/projects/fimaWebsite/src/hooks/useSiteSettings.ts"],"sourcesContent":["import { useState, useEffect } from 'react';\nimport { projectId, publicAnonKey } from '../utils/supabase/info';\n\nexport interface Language {\n  code: string;\n  name: string;\n  flag: string;\n}\n\nexport interface Currency {\n  code: string;\n  symbol: string;\n  name: string;\n}\n\nexport interface SocialLinks {\n  facebook: string;\n  instagram: string;\n  linkedin: string;\n  twitter: string;\n}\n\nexport interface ContactInfo {\n  email: string;\n  phone: string;\n  address: string;\n  hours: string;\n}\n\nexport interface SiteSettings {\n  languages: Language[];\n  currencies: Currency[];\n  company_description: string;\n  certifications: string[];\n  social_links: SocialLinks;\n  contact_info: ContactInfo;\n}\n\n// Donn√©es de fallback locales\nconst DEFAULT_SETTINGS: SiteSettings = {\n  languages: [\n    { code: \"FR\", name: \"Fran√ßais\", flag: \"üá´üá∑\" },\n    { code: \"EN\", name: \"English\", flag: \"üá¨üáß\" }\n  ],\n  currencies: [\n    { code: \"XOF\", symbol: \"F CFA\", name: \"Franc CFA\" },\n    { code: \"EUR\", symbol: \"‚Ç¨\", name: \"Euro\" },\n    { code: \"USD\", symbol: \"$\", name: \"US Dollar\" },\n    { code: \"GBP\", symbol: \"¬£\", name: \"British Pound\" }\n  ],\n  company_description: \"Leader dans la litterie, l'ameublement et la vitrerie depuis plus de 40 ans. FIMA accompagne les professionnels et les particuliers avec expertise et innovation.\",\n  certifications: [\n    \"Entreprise du Patrimoine Vivant\",\n    \"Certifi√© ISO 9001\"\n  ],\n  social_links: {\n    facebook: \"#\",\n    instagram: \"#\",\n    linkedin: \"#\",\n    twitter: \"#\"\n  },\n  contact_info: {\n    email: \"contact@fima.ci\",\n    phone: \"+225 27 22 12 34 56\",\n    address: \"Zone Industrielle, Abidjan, C√¥te d'Ivoire\",\n    hours: \"Lun-Ven: 8h-18h, Sam: 9h-13h\"\n  }\n};\n\nexport const useSiteSettings = (key?: string) => {\n  const [settings, setSettings] = useState<SiteSettings | any>(\n    key ? DEFAULT_SETTINGS[key as keyof SiteSettings] : DEFAULT_SETTINGS\n  );\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n\n  useEffect(() => {\n    // TOUJOURS utiliser les donn√©es locales (pas d'appel API)\n    // Les donn√©es Supabase ne sont pas configur√©es, donc on utilise les fallbacks\n    console.log('üìä useSiteSettings: Utilisation des donn√©es locales');\n    \n    if (key) {\n      setSettings(DEFAULT_SETTINGS[key as keyof SiteSettings]);\n    } else {\n      setSettings(DEFAULT_SETTINGS);\n    }\n    setError(null);\n    setLoading(false);\n  }, [key]);\n\n  return { settings, loading, error };\n};\n\n// Hook sp√©cialis√© pour les langues\nexport const useLanguages = () => {\n  const { settings, loading, error } = useSiteSettings('languages');\n  return { languages: settings as Language[], loading, error };\n};\n\n// Hook sp√©cialis√© pour les devises\nexport const useCurrencies = () => {\n  const { settings, loading, error } = useSiteSettings('currencies');\n  return { currencies: settings as Currency[], loading, error };\n};\n\n// Hook sp√©cialis√© pour la description de l'entreprise\nexport const useCompanyDescription = () => {\n  const { settings, loading, error } = useSiteSettings('company_description');\n  return { description: settings as string, loading, error };\n};\n\n// Hook sp√©cialis√© pour les certifications\nexport const useCertifications = () => {\n  const { settings, loading, error } = useSiteSettings('certifications');\n  return { certifications: settings as string[], loading, error };\n};\n\n// Hook sp√©cialis√© pour les liens sociaux\nexport const useSocialLinks = () => {\n  const { settings, loading, error } = useSiteSettings('social_links');\n  return { socialLinks: settings as SocialLinks, loading, error };\n};\n\n// Hook sp√©cialis√© pour les informations de contact\nexport const useContactInfo = () => {\n  const { settings, loading, error } = useSiteSettings('contact_info');\n  return { contactInfo: settings as ContactInfo, loading, error };\n};\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;AAAA;;;AAsCA,8BAA8B;AAC9B,MAAM,mBAAiC;IACrC,WAAW;QACT;YAAE,MAAM;YAAM,MAAM;YAAY,MAAM;QAAO;QAC7C;YAAE,MAAM;YAAM,MAAM;YAAW,MAAM;QAAO;KAC7C;IACD,YAAY;QACV;YAAE,MAAM;YAAO,QAAQ;YAAS,MAAM;QAAY;QAClD;YAAE,MAAM;YAAO,QAAQ;YAAK,MAAM;QAAO;QACzC;YAAE,MAAM;YAAO,QAAQ;YAAK,MAAM;QAAY;QAC9C;YAAE,MAAM;YAAO,QAAQ;YAAK,MAAM;QAAgB;KACnD;IACD,qBAAqB;IACrB,gBAAgB;QACd;QACA;KACD;IACD,cAAc;QACZ,UAAU;QACV,WAAW;QACX,UAAU;QACV,SAAS;IACX;IACA,cAAc;QACZ,OAAO;QACP,OAAO;QACP,SAAS;QACT,OAAO;IACT;AACF;AAEO,MAAM,kBAAkB,CAAC;;IAC9B,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,sIAAQ,EACtC,MAAM,gBAAgB,CAAC,IAA0B,GAAG;IAEtD,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,sIAAQ,EAAC;IACvC,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,sIAAQ,EAAgB;IAElD,IAAA,uIAAS;qCAAC;YACR,0DAA0D;YAC1D,8EAA8E;YAC9E,QAAQ,GAAG,CAAC;YAEZ,IAAI,KAAK;gBACP,YAAY,gBAAgB,CAAC,IAA0B;YACzD,OAAO;gBACL,YAAY;YACd;YACA,SAAS;YACT,WAAW;QACb;oCAAG;QAAC;KAAI;IAER,OAAO;QAAE;QAAU;QAAS;IAAM;AACpC;GAtBa;AAyBN,MAAM,eAAe;;IAC1B,MAAM,EAAE,QAAQ,EAAE,OAAO,EAAE,KAAK,EAAE,GAAG,gBAAgB;IACrD,OAAO;QAAE,WAAW;QAAwB;QAAS;IAAM;AAC7D;IAHa;;QAC0B;;;AAKhC,MAAM,gBAAgB;;IAC3B,MAAM,EAAE,QAAQ,EAAE,OAAO,EAAE,KAAK,EAAE,GAAG,gBAAgB;IACrD,OAAO;QAAE,YAAY;QAAwB;QAAS;IAAM;AAC9D;IAHa;;QAC0B;;;AAKhC,MAAM,wBAAwB;;IACnC,MAAM,EAAE,QAAQ,EAAE,OAAO,EAAE,KAAK,EAAE,GAAG,gBAAgB;IACrD,OAAO;QAAE,aAAa;QAAoB;QAAS;IAAM;AAC3D;IAHa;;QAC0B;;;AAKhC,MAAM,oBAAoB;;IAC/B,MAAM,EAAE,QAAQ,EAAE,OAAO,EAAE,KAAK,EAAE,GAAG,gBAAgB;IACrD,OAAO;QAAE,gBAAgB;QAAsB;QAAS;IAAM;AAChE;IAHa;;QAC0B;;;AAKhC,MAAM,iBAAiB;;IAC5B,MAAM,EAAE,QAAQ,EAAE,OAAO,EAAE,KAAK,EAAE,GAAG,gBAAgB;IACrD,OAAO;QAAE,aAAa;QAAyB;QAAS;IAAM;AAChE;IAHa;;QAC0B;;;AAKhC,MAAM,iBAAiB;;IAC5B,MAAM,EAAE,QAAQ,EAAE,OAAO,EAAE,KAAK,EAAE,GAAG,gBAAgB;IACrD,OAAO;QAAE,aAAa;QAAyB;QAAS;IAAM;AAChE;IAHa;;QAC0B"}},
    {"offset": {"line": 196, "column": 0}, "map": {"version":3,"sources":["file:///c:/Users/HP/projects/fimaWebsite/src/hooks/useProductCategories.ts"],"sourcesContent":["import { useState, useEffect } from 'react';\nimport { projectId, publicAnonKey } from '../utils/supabase/info';\n\nexport interface ProductCategory {\n  id: string;\n  key: string;\n  slug: string;\n  name: string;\n  icon: string;\n  description: string;\n  count?: string;\n  business: string;\n  images?: string[]; // URLs des images\n  thumbnail?: string; // Image principale\n  color?: string;\n  order_index?: number;\n  is_active?: boolean;\n}\n\nexport interface ProductCategoriesByBusiness {\n  'fima-couchage': ProductCategory[];\n  'fima-design': ProductCategory[];\n  'univers-glass': ProductCategory[];\n}\n\n// Mapper le business_unit du CMS vers le format utilis√© dans l'app\nconst mapBusinessUnit = (unit: string): 'fima-couchage' | 'fima-design' | 'univers-glass' => {\n  switch (unit) {\n    case 'couchage':\n      return 'fima-couchage';\n    case 'design':\n      return 'fima-design';\n    case 'univers-glass':\n      return 'univers-glass';\n    default:\n      return 'fima-design';\n  }\n};\n\n// Donn√©es de fallback locales (utilis√©es uniquement si le CMS est vide)\nconst DEFAULT_CATEGORIES: ProductCategoriesByBusiness = {\n  \"fima-couchage\": [\n    { id: '1', key: \"matelas\", slug: \"matelas\", name: \"Matelas\", icon: \"üõèÔ∏è\", description: \"Ressorts, mousse, latex naturel\", count: \"45 mod√®les\", business: \"fima-couchage\" },\n    { id: '2', key: \"sommiers\", slug: \"sommiers\", name: \"Sommiers\", icon: \"üè†\", description: \"Tapissiers, √©lectriques, √† lattes\", count: \"32 mod√®les\", business: \"fima-couchage\" },\n    { id: '3', key: \"oreillers\", slug: \"oreillers\", name: \"Oreillers\", icon: \"üí§\", description: \"M√©moire de forme, duvet, ergonomiques\", count: \"28 mod√®les\", business: \"fima-couchage\" },\n    { id: '4', key: \"linge-de-lit\", slug: \"linge-de-lit\", name: \"Linge de lit\", icon: \"üåø\", description: \"Parures, draps, couettes\", count: \"150+ articles\", business: \"fima-couchage\" },\n    { id: '5', key: \"accessoires-literie\", slug: \"accessoires-literie\", name: \"Accessoires\", icon: \"‚ú®\", description: \"Protections, surmatelas, coussins\", count: \"45 articles\", business: \"fima-couchage\" }\n  ],\n  \"fima-design\": [\n    { id: '6', key: \"habillement-mural\", slug: \"habillement-mural\", name: \"Habillage mural\", icon: \"üé®\", description: \"Rev√™tements et finitions\", count: \"45+ r√©f√©rences\", business: \"fima-design\" },\n    { id: '7', key: \"portes\", slug: \"portes\", name: \"Portes\", icon: \"üö™\", description: \"Portes int√©rieures et menuiserie\", count: \"50+ mod√®les\", business: \"fima-design\" },\n    { id: '8', key: \"chambres\", slug: \"chambres\", name: \"Chambres\", icon: \"üõèÔ∏è\", description: \"Mobilier pour chambres\", count: \"35+ mod√®les\", business: \"fima-design\" },\n    { id: '9', key: \"cuisine\", slug: \"cuisine\", name: \"Cuisine\", icon: \"üç≥\", description: \"Cuisines √©quip√©es modernes\", count: \"40+ mod√®les\", business: \"fima-design\" },\n    { id: '10', key: \"dressing\", slug: \"dressing\", name: \"Dressing\", icon: \"üëî\", description: \"Rangements sur mesure\", count: \"30+ mod√®les\", business: \"fima-design\" },\n    { id: '11', key: \"amenagement-buanderie\", slug: \"amenagement-buanderie\", name: \"Am√©nagement buanderie\", icon: \"üß∫\", description: \"Espaces optimis√©s pour buanderie\", count: \"12+ mod√®les\", business: \"fima-design\" },\n    { id: '12', key: \"bureaux\", slug: \"bureaux\", name: \"Bureaux\", icon: \"üñ•Ô∏è\", description: \"Mobilier de bureau professionnel\", count: \"25+ mod√®les\", business: \"fima-design\" },\n    { id: '13', key: \"salles-a-manger\", slug: \"salles-a-manger\", name: \"Salles √† manger\", icon: \"üçΩÔ∏è\", description: \"Mobilier salle √† manger\", count: \"28+ ensembles\", business: \"fima-design\" },\n    { id: '14', key: \"salon\", slug: \"salon\", name: \"Salon\", icon: \"üõãÔ∏è\", description: \"Mobilier de salon\", count: \"42+ mod√®les\", business: \"fima-design\" }\n  ],\n  \"univers-glass\": [\n    { id: '15', key: \"vitrerie\", slug: \"vitrerie\", name: \"Vitrerie\", icon: \"ü™ü\", description: \"Vitres et miroirs\", count: \"50+ types\", business: \"univers-glass\" },\n    { id: '16', key: \"menuiserie-aluminium\", slug: \"menuiserie-aluminium\", name: \"Menuiserie Aluminium\", icon: \"üî©\", description: \"Cadres et structures\", count: \"45+ profils\", business: \"univers-glass\" },\n    { id: '17', key: \"fenetres\", slug: \"fenetres\", name: \"Fen√™tres\", icon: \"üè†\", description: \"Fen√™tres sur mesure\", count: \"60+ mod√®les\", business: \"univers-glass\" },\n    { id: '18', key: \"portes-vitrees\", slug: \"portes-vitrees\", name: \"Portes vitr√©es\", icon: \"üö™\", description: \"Portes vitr√©es et alu\", count: \"55+ mod√®les\", business: \"univers-glass\" },\n    { id: '19', key: \"cloisons\", slug: \"cloisons\", name: \"Cloisons\", icon: \"üß±\", description: \"S√©parations d'espaces\", count: \"30+ solutions\", business: \"univers-glass\" }\n  ]\n};\n\n// Exporter les cat√©gories par d√©faut pour utilisation directe\nexport { DEFAULT_CATEGORIES };\n\nexport const useProductCategories = (business?: 'fima-couchage' | 'fima-design' | 'univers-glass') => {\n  const [categories, setCategories] = useState<ProductCategory[] | ProductCategoriesByBusiness>([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n\n  console.log('üîß useProductCategories - business param:', business);\n\n  useEffect(() => {\n    const fetchCategories = async () => {\n      try {\n        setLoading(true);\n        setError(null);\n        \n        // Charger les cat√©gories CMS\n        const response = await fetch(\n          `https://${projectId}.supabase.co/functions/v1/make-server-98c6ec1c/categories`,\n          {\n            headers: {\n              'Authorization': `Bearer ${publicAnonKey}`,\n              'Content-Type': 'application/json'\n            }\n          }\n        );\n\n        if (!response.ok) {\n          throw new Error(`HTTP error! status: ${response.status}`);\n        }\n\n        const result = await response.json();\n        \n        if (result.success && result.data && result.data.length > 0) {\n          console.log('‚úÖ useProductCategories: Cat√©gories CMS charg√©es', result.data);\n          \n          // Convertir les cat√©gories CMS au format ProductCategory\n          const cmsCategories = result.data\n            .filter((cat: any) => cat.is_active !== false)\n            .map((cat: any) => ({\n              id: cat.id,\n              key: cat.slug,\n              slug: cat.slug,\n              name: cat.name,\n              icon: cat.icon_emoji || 'üì¶',\n              description: cat.description || '',\n              business: cat.business_unit === 'all' ? 'fima-design' : mapBusinessUnit(cat.business_unit),\n              images: cat.images || [],\n              thumbnail: cat.thumbnail || '',\n              color: cat.color,\n              order_index: cat.order_index,\n              is_active: cat.is_active\n            }))\n            .sort((a: ProductCategory, b: ProductCategory) => {\n              // Trier par order_index (les cat√©gories sans order_index vont √† la fin)\n              const orderA = a.order_index ?? 9999;\n              const orderB = b.order_index ?? 9999;\n              return orderA - orderB;\n            });\n\n          // Organiser par business unit si pas de filtre, sinon filtrer\n          if (business) {\n            const filteredCategories = cmsCategories.filter((cat: ProductCategory) => cat.business === business);\n            console.log(`‚úÖ Cat√©gories filtr√©es pour ${business}:`, filteredCategories);\n            setCategories(filteredCategories);\n          } else {\n            // Grouper par business unit (les cat√©gories sont d√©j√† tri√©es)\n            const grouped: ProductCategoriesByBusiness = {\n              'fima-couchage': cmsCategories.filter((cat: ProductCategory) => cat.business === 'fima-couchage'),\n              'fima-design': cmsCategories.filter((cat: ProductCategory) => cat.business === 'fima-design'),\n              'univers-glass': cmsCategories.filter((cat: ProductCategory) => cat.business === 'univers-glass')\n            };\n            console.log('‚úÖ Cat√©gories group√©es par business:', grouped);\n            setCategories(grouped);\n          }\n          \n          setError(null);\n        } else {\n          // Si aucune cat√©gorie CMS, utiliser les fallbacks\n          console.log('‚ö†Ô∏è Aucune cat√©gorie CMS trouv√©e, utilisation des donn√©es par d√©faut');\n          if (business) {\n            setCategories(DEFAULT_CATEGORIES[business]);\n          } else {\n            setCategories(DEFAULT_CATEGORIES);\n          }\n        }\n      } catch (err) {\n        console.log('‚ö†Ô∏è useProductCategories: Erreur lors du chargement des cat√©gories CMS, utilisation des donn√©es locales', err instanceof Error ? err.message : err);\n        // En cas d'erreur, utiliser les donn√©es locales\n        if (business) {\n          setCategories(DEFAULT_CATEGORIES[business]);\n        } else {\n          setCategories(DEFAULT_CATEGORIES);\n        }\n        setError(null); // Ne pas consid√©rer comme une erreur car le fallback fonctionne\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    fetchCategories();\n  }, [business]);\n\n  return { categories, loading, error };\n};"],"names":[],"mappings":"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"}},
    {"offset": {"line": 538, "column": 0}, "map": {"version":3,"sources":["file:///c:/Users/HP/projects/fimaWebsite/src/hooks/useSupabaseBusinessUnits.ts"],"sourcesContent":["import { useState, useEffect } from 'react';\nimport { projectId, publicAnonKey } from '../utils/supabase/info';\n\nexport interface BusinessUnit {\n  id: string;\n  slug: string;\n  name: string;\n  name_fr?: string;\n  name_en?: string;\n  description: string;\n  description_fr?: string;\n  description_en?: string;\n  icon: string;\n  primary_color: string;\n  order_index?: number;\n  is_active?: boolean;\n}\n\n// Donn√©es de fallback locales\nconst DEFAULT_BUSINESS_UNITS: BusinessUnit[] = [\n  {\n    id: 'fima-couchage',\n    slug: 'fima-couchage',\n    name: 'FIMA Couchage',\n    name_fr: 'FIMA Couchage',\n    name_en: 'FIMA Bedding',\n    description: 'Solutions compl√®tes pour literie professionnelle et particuliers',\n    description_fr: 'Solutions compl√®tes pour literie professionnelle et particuliers',\n    description_en: 'Complete solutions for professional and residential bedding',\n    icon: 'Bed',\n    primary_color: '#B5C233',\n    order_index: 1,\n    is_active: true\n  },\n  {\n    id: 'fima-design',\n    slug: 'fima-design',\n    name: 'FIMA Design',\n    name_fr: 'FIMA Design',\n    name_en: 'FIMA Design',\n    description: 'Menuiserie et ameublement sur mesure',\n    description_fr: 'Menuiserie et ameublement sur mesure',\n    description_en: 'Custom carpentry and furniture',\n    icon: 'Armchair',\n    primary_color: '#6E6E6E',\n    order_index: 2,\n    is_active: true\n  },\n  {\n    id: 'univers-glass',\n    slug: 'univers-glass',\n    name: 'UNIVERS GLASS',\n    name_fr: 'UNIVERS GLASS',\n    name_en: 'UNIVERS GLASS',\n    description: 'Vitrerie et menuiserie aluminium',\n    description_fr: 'Vitrerie et menuiserie aluminium',\n    description_en: 'Glazing and aluminum carpentry',\n    icon: 'Building2',\n    primary_color: '#0EA5E9',\n    order_index: 3,\n    is_active: true\n  }\n];\n\n/**\n * Hook pour r√©cup√©rer les unit√©s m√©tier depuis l'API Supabase (KV Store)\n * \n * ‚ö†Ô∏è MODE TEMPORAIRE: API d√©sactiv√©e pour √©viter les erreurs 404\n * üìù Pour r√©activer l'API apr√®s red√©ploiement du serveur:\n *    1. Red√©ployez: supabase functions deploy server\n *    2. D√©commentez le code dans fetchBusinessUnits()\n *    3. Commentez la ligne setBusinessUnits(DEFAULT_BUSINESS_UNITS)\n */\nexport const useSupabaseBusinessUnits = () => {\n  const [businessUnits, setBusinessUnits] = useState<BusinessUnit[]>(DEFAULT_BUSINESS_UNITS);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n\n  useEffect(() => {\n    const fetchBusinessUnits = async () => {\n      try {\n        // ‚ö†Ô∏è API TEMPORAIREMENT D√âSACTIV√âE - Utilisation des donn√©es locales uniquement\n        // Pour √©viter l'erreur 404 jusqu'au red√©ploiement du serveur\n        console.log('üè¢ Business Units: Mode local (API d√©sactiv√©e)');\n        console.log('üí° Pour activer l\\'API: red√©ployez avec \"supabase functions deploy server\"');\n        \n        // Utiliser directement les donn√©es de fallback\n        setBusinessUnits(DEFAULT_BUSINESS_UNITS);\n        setError(null);\n        setLoading(false);\n        \n        /* \n        ==========================================\n        CODE API √Ä D√âCOMMENTER APR√àS RED√âPLOIEMENT\n        ==========================================\n        \n        console.log('üè¢ useSupabaseBusinessUnits: R√©cup√©ration depuis l\\'API...');\n        \n        const response = await fetch(\n          `https://${projectId}.supabase.co/functions/v1/make-server-98c6ec1c/business-units`,\n          {\n            headers: {\n              'Authorization': `Bearer ${publicAnonKey}`,\n              'Content-Type': 'application/json',\n            },\n          }\n        );\n\n        if (!response.ok) {\n          if (response.status === 404) {\n            console.warn('‚ö†Ô∏è Route /business-units retourne 404');\n            console.log('üí° SOLUTION: Red√©ployez le serveur Supabase avec: supabase functions deploy server');\n            console.log('üì¶ Utilisation des donn√©es de fallback en attendant');\n          }\n          throw new Error(`HTTP error! status: ${response.status}`);\n        }\n\n        const result = await response.json();\n        \n        if (result.success && result.data && result.data.length > 0) {\n          console.log('‚úÖ Business Units r√©cup√©r√©s depuis Supabase:', result.data);\n          \n          const sortedUnits = result.data.sort((a: BusinessUnit, b: BusinessUnit) => {\n            return (a.order_index || 0) - (b.order_index || 0);\n          });\n          \n          const activeUnits = sortedUnits.filter((unit: BusinessUnit) => unit.is_active !== false);\n          \n          setBusinessUnits(activeUnits);\n          setError(null);\n        } else {\n          console.log('‚ö†Ô∏è Aucune business unit Supabase, utilisation des donn√©es locales');\n          setBusinessUnits(DEFAULT_BUSINESS_UNITS);\n          setError(null);\n        }\n        \n        ==========================================\n        FIN DU CODE √Ä D√âCOMMENTER\n        ==========================================\n        */\n        \n      } catch (err) {\n        console.error('‚ùå Erreur API Business Units:', err instanceof Error ? err.message : 'Erreur inconnue');\n        setBusinessUnits(DEFAULT_BUSINESS_UNITS);\n        setError(null);\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    fetchBusinessUnits();\n  }, []);\n\n  return { businessUnits, loading, error };\n};"],"names":[],"mappings":";;;;AAAA;;;AAkBA,8BAA8B;AAC9B,MAAM,yBAAyC;IAC7C;QACE,IAAI;QACJ,MAAM;QACN,MAAM;QACN,SAAS;QACT,SAAS;QACT,aAAa;QACb,gBAAgB;QAChB,gBAAgB;QAChB,MAAM;QACN,eAAe;QACf,aAAa;QACb,WAAW;IACb;IACA;QACE,IAAI;QACJ,MAAM;QACN,MAAM;QACN,SAAS;QACT,SAAS;QACT,aAAa;QACb,gBAAgB;QAChB,gBAAgB;QAChB,MAAM;QACN,eAAe;QACf,aAAa;QACb,WAAW;IACb;IACA;QACE,IAAI;QACJ,MAAM;QACN,MAAM;QACN,SAAS;QACT,SAAS;QACT,aAAa;QACb,gBAAgB;QAChB,gBAAgB;QAChB,MAAM;QACN,eAAe;QACf,aAAa;QACb,WAAW;IACb;CACD;AAWM,MAAM,2BAA2B;;IACtC,MAAM,CAAC,eAAe,iBAAiB,GAAG,IAAA,sIAAQ,EAAiB;IACnE,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,sIAAQ,EAAC;IACvC,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,sIAAQ,EAAgB;IAElD,IAAA,uIAAS;8CAAC;YACR,MAAM;yEAAqB;oBACzB,IAAI;wBACF,gFAAgF;wBAChF,6DAA6D;wBAC7D,QAAQ,GAAG,CAAC;wBACZ,QAAQ,GAAG,CAAC;wBAEZ,+CAA+C;wBAC/C,iBAAiB;wBACjB,SAAS;wBACT,WAAW;oBAEX;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;QAgDA,GAEF,EAAE,OAAO,KAAK;wBACZ,QAAQ,KAAK,CAAC,gCAAgC,eAAe,QAAQ,IAAI,OAAO,GAAG;wBACnF,iBAAiB;wBACjB,SAAS;oBACX,SAAU;wBACR,WAAW;oBACb;gBACF;;YAEA;QACF;6CAAG,EAAE;IAEL,OAAO;QAAE;QAAe;QAAS;IAAM;AACzC;GAjFa"}},
    {"offset": {"line": 682, "column": 0}, "map": {"version":3,"sources":["file:///c:/Users/HP/projects/fimaWebsite/src/hooks/useCMSCategories.ts"],"sourcesContent":["import { useState, useEffect } from 'react';\nimport { projectId, publicAnonKey } from '../utils/supabase/info';\n\nexport interface CMSCategory {\n  id: string;\n  name: string;\n  slug: string;\n  description: string;\n  parent_id: string | null;\n  color: string;\n  icon_emoji: string;\n  order_index: number;\n  is_active: boolean;\n  business_unit: 'couchage' | 'design' | 'univers-glass' | 'all';\n  images?: string[]; // URLs des images de la cat√©gorie\n  thumbnail?: string; // Image principale/miniature\n}\n\nexport function useCMSCategories() {\n  const [categories, setCategories] = useState<CMSCategory[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n\n  const fetchCategories = async () => {\n    try {\n      setLoading(true);\n      const response = await fetch(\n        `https://${projectId}.supabase.co/functions/v1/make-server-98c6ec1c/categories`,\n        {\n          headers: {\n            'Authorization': `Bearer ${publicAnonKey}`,\n            'Content-Type': 'application/json'\n          }\n        }\n      );\n\n      if (!response.ok) {\n        throw new Error(`HTTP error! status: ${response.status}`);\n      }\n\n      const result = await response.json();\n      \n      if (result.success && result.data) {\n        setCategories(result.data);\n        setError(null);\n      } else {\n        setCategories([]);\n      }\n    } catch (err) {\n      console.error('Erreur lors du chargement des cat√©gories:', err);\n      setError(err instanceof Error ? err.message : 'Erreur inconnue');\n      setCategories([]);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  useEffect(() => {\n    fetchCategories();\n  }, []);\n\n  return { \n    categories, \n    loading, \n    error,\n    refetch: fetchCategories \n  };\n}"],"names":[],"mappings":";;;;AAAA;AACA;;;;AAiBO,SAAS;;IACd,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,sIAAQ,EAAgB,EAAE;IAC9D,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,sIAAQ,EAAC;IACvC,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,sIAAQ,EAAgB;IAElD,MAAM,kBAAkB;QACtB,IAAI;YACF,WAAW;YACX,MAAM,WAAW,MAAM,MACrB,CAAC,QAAQ,EAAE,0IAAS,CAAC,yDAAyD,CAAC,EAC/E;gBACE,SAAS;oBACP,iBAAiB,CAAC,OAAO,EAAE,8IAAa,EAAE;oBAC1C,gBAAgB;gBAClB;YACF;YAGF,IAAI,CAAC,SAAS,EAAE,EAAE;gBAChB,MAAM,IAAI,MAAM,CAAC,oBAAoB,EAAE,SAAS,MAAM,EAAE;YAC1D;YAEA,MAAM,SAAS,MAAM,SAAS,IAAI;YAElC,IAAI,OAAO,OAAO,IAAI,OAAO,IAAI,EAAE;gBACjC,cAAc,OAAO,IAAI;gBACzB,SAAS;YACX,OAAO;gBACL,cAAc,EAAE;YAClB;QACF,EAAE,OAAO,KAAK;YACZ,QAAQ,KAAK,CAAC,6CAA6C;YAC3D,SAAS,eAAe,QAAQ,IAAI,OAAO,GAAG;YAC9C,cAAc,EAAE;QAClB,SAAU;YACR,WAAW;QACb;IACF;IAEA,IAAA,uIAAS;sCAAC;YACR;QACF;qCAAG,EAAE;IAEL,OAAO;QACL;QACA;QACA;QACA,SAAS;IACX;AACF;GAjDgB"}},
    {"offset": {"line": 743, "column": 0}, "map": {"version":3,"sources":["file:///c:/Users/HP/projects/fimaWebsite/src/hooks/useStrapiData.ts"],"sourcesContent":["import { useState, useEffect } from 'react';\nimport { strapiApi } from '../services/strapiApi';\nimport {\n  StrapiProduct,\n  StrapiCategory,\n  StrapiTestimonial,\n  StrapiHeroSlide,\n  StrapiCollectionResponse,\n  StrapiResponse,\n  StrapiQueryParams\n} from '../types/strapi';\n\n// Hook g√©n√©rique pour les donn√©es\nexport function useStrapiData<T>(\n  apiCall: () => Promise<StrapiCollectionResponse<T> | StrapiResponse<T>>,\n  dependencies: any[] = []\n) {\n  const [data, setData] = useState<T | T[] | null>(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n\n  useEffect(() => {\n    let isMounted = true;\n\n    const fetchData = async () => {\n      try {\n        setLoading(true);\n        setError(null);\n        const response = await apiCall();\n        \n        if (isMounted) {\n          // V√©rifier si c'est une collection ou un √©l√©ment unique\n          if ('data' in response && Array.isArray(response.data)) {\n            setData(response.data);\n          } else if ('data' in response) {\n            setData(response.data);\n          }\n        }\n      } catch (err) {\n        if (isMounted) {\n          setError(err instanceof Error ? err.message : 'Une erreur est survenue');\n        }\n      } finally {\n        if (isMounted) {\n          setLoading(false);\n        }\n      }\n    };\n\n    fetchData();\n\n    return () => {\n      isMounted = false;\n    };\n  }, dependencies);\n\n  return { data, loading, error };\n}\n\n// Hook pour r√©cup√©rer tous les produits\nexport function useProducts(params: StrapiQueryParams = {}) {\n  return useStrapiData<StrapiProduct>(\n    () => strapiApi.getProducts(params),\n    [JSON.stringify(params)]\n  );\n}\n\n// Hook pour r√©cup√©rer un produit par ID\nexport function useProduct(id: number, params: StrapiQueryParams = {}) {\n  return useStrapiData<StrapiProduct>(\n    () => strapiApi.getProduct(id, params),\n    [id, JSON.stringify(params)]\n  );\n}\n\n// Hook pour r√©cup√©rer un produit par slug\nexport function useProductBySlug(slug: string, params: StrapiQueryParams = {}) {\n  return useStrapiData<StrapiProduct>(\n    () => strapiApi.getProductBySlug(slug, params),\n    [slug, JSON.stringify(params)]\n  );\n}\n\n// Hook pour r√©cup√©rer les produits par cat√©gorie\nexport function useProductsByCategory(categorySlug: string, params: StrapiQueryParams = {}) {\n  return useStrapiData<StrapiProduct>(\n    () => strapiApi.getProductsByCategory(categorySlug, params),\n    [categorySlug, JSON.stringify(params)]\n  );\n}\n\n// Hook pour r√©cup√©rer toutes les cat√©gories\nexport function useCategories(params: StrapiQueryParams = {}) {\n  return useStrapiData<StrapiCategory>(\n    () => strapiApi.getCategories(params),\n    [JSON.stringify(params)]\n  );\n}\n\n// Hook pour r√©cup√©rer les t√©moignages\nexport function useTestimonials(params: StrapiQueryParams = {}) {\n  return useStrapiData<StrapiTestimonial>(\n    () => strapiApi.getTestimonials(params),\n    [JSON.stringify(params)]\n  );\n}\n\n// Hook pour r√©cup√©rer les slides du hero\nexport function useHeroSlides(params: StrapiQueryParams = {}) {\n  return useStrapiData<StrapiHeroSlide>(\n    () => strapiApi.getHeroSlides(params),\n    [JSON.stringify(params)]\n  );\n}\n\n// Hook pour les op√©rations de mutation (cr√©ation, mise √† jour, suppression)\nexport function useStrapiMutation<T, P>(\n  mutationFn: (params: P) => Promise<StrapiResponse<T>>\n) {\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n\n  const mutate = async (params: P): Promise<T | null> => {\n    try {\n      setLoading(true);\n      setError(null);\n      const response = await mutationFn(params);\n      return response.data;\n    } catch (err) {\n      setError(err instanceof Error ? err.message : 'Une erreur est survenue');\n      return null;\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return { mutate, loading, error };\n}\n\n// Hook pour cr√©er une commande\nexport function useCreateOrder() {\n  return useStrapiMutation(strapiApi.createOrder.bind(strapiApi));\n}\n\n// Hook avec pagination avanc√©e\nexport function usePaginatedProducts(initialParams: StrapiQueryParams = {}) {\n  const [params, setParams] = useState<StrapiQueryParams>({\n    pagination: { page: 1, pageSize: 12 },\n    ...initialParams\n  });\n  \n  const { data, loading, error } = useProducts(params);\n  \n  const [allProducts, setAllProducts] = useState<StrapiProduct[]>([]);\n  const [hasMore, setHasMore] = useState(true);\n\n  useEffect(() => {\n    if (data && Array.isArray(data)) {\n      if (params.pagination?.page === 1) {\n        setAllProducts(data);\n      } else {\n        setAllProducts(prev => [...prev, ...data]);\n      }\n    }\n  }, [data, params.pagination?.page]);\n\n  const loadMore = () => {\n    if (!loading && hasMore) {\n      setParams(prev => ({\n        ...prev,\n        pagination: {\n          ...prev.pagination,\n          page: (prev.pagination?.page || 1) + 1\n        }\n      }));\n    }\n  };\n\n  const updateFilters = (newFilters: StrapiQueryParams) => {\n    setParams({\n      ...newFilters,\n      pagination: { page: 1, pageSize: 12 }\n    });\n    setAllProducts([]);\n    setHasMore(true);\n  };\n\n  return {\n    products: allProducts,\n    loading,\n    error,\n    hasMore,\n    loadMore,\n    updateFilters\n  };\n}\n\n// Hook pour la recherche avec debounce\nexport function useProductSearch(searchTerm: string, delay: number = 300) {\n  const [debouncedTerm, setDebouncedTerm] = useState(searchTerm);\n\n  useEffect(() => {\n    const timer = setTimeout(() => {\n      setDebouncedTerm(searchTerm);\n    }, delay);\n\n    return () => clearTimeout(timer);\n  }, [searchTerm, delay]);\n\n  const searchParams: StrapiQueryParams = {\n    filters: debouncedTerm ? {\n      $or: [\n        { title: { $containsi: debouncedTerm } },\n        { description: { $containsi: debouncedTerm } }\n      ]\n    } : {},\n    populate: ['image', 'category']\n  };\n\n  return useProducts(debouncedTerm ? searchParams : {});\n}"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1068, "column": 0}, "map": {"version":3,"sources":["file:///c:/Users/HP/projects/fimaWebsite/src/hooks/useLanguage.ts"],"sourcesContent":["import { useApp } from '../contexts/AppContext';\nimport { getTranslation, TranslationKey, LanguageCode } from '../utils/translations';\n\n/**\n * Hook personnalis√© pour g√©rer les traductions avec la langue s√©lectionn√©e\n */\nexport function useLanguage() {\n  const { selectedLanguage, setSelectedLanguage } = useApp();\n\n  /**\n   * Traduit une cl√© selon la langue s√©lectionn√©e\n   * @param key Cl√© de traduction\n   * @returns Texte traduit\n   */\n  const t = (key: TranslationKey): string => {\n    return getTranslation(key, selectedLanguage);\n  };\n\n  /**\n   * Change la langue de l'application\n   * @param language Code de la nouvelle langue\n   */\n  const changeLanguage = (language: LanguageCode) => {\n    setSelectedLanguage(language);\n  };\n\n  return {\n    selectedLanguage,\n    changeLanguage,\n    t,\n  };\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;;;;AAKO,SAAS;;IACd,MAAM,EAAE,gBAAgB,EAAE,mBAAmB,EAAE,GAAG,IAAA,oIAAM;IAExD;;;;GAIC,GACD,MAAM,IAAI,CAAC;QACT,OAAO,IAAA,0IAAc,EAAC,KAAK;IAC7B;IAEA;;;GAGC,GACD,MAAM,iBAAiB,CAAC;QACtB,oBAAoB;IACtB;IAEA,OAAO;QACL;QACA;QACA;IACF;AACF;GAzBgB;;QACoC,oIAAM"}},
    {"offset": {"line": 1111, "column": 0}, "map": {"version":3,"sources":["file:///c:/Users/HP/projects/fimaWebsite/src/hooks/useHeroSlides.ts"],"sourcesContent":["import { useState, useEffect } from 'react';\nimport { projectId, publicAnonKey } from '../utils/supabase/info';\nimport { useLanguage } from './useLanguage';\n\ninterface HeroSlideTranslation {\n  title: string;\n  subtitle: string;\n  description: string;\n  cta_primary: string;\n  badge: string;\n}\n\nexport interface HeroSlide {\n  id: string;\n  sort_order: number;\n  background_image_url: string;\n  is_video: boolean;\n  video_url?: string;\n  slide_duration: number;\n  video_play_duration?: number;\n  video_loop: boolean;\n  is_active: boolean;\n  cta_bg_color?: string;\n  cta_text_color?: string;\n  translation: HeroSlideTranslation;\n  translations?: {\n    fr: HeroSlideTranslation;\n    en: HeroSlideTranslation;\n  };\n}\n\ninterface UseHeroSlidesReturn {\n  slides: HeroSlide[];\n  loading: boolean;\n  error: string | null;\n  refetch: () => Promise<void>;\n}\n\nexport function useHeroSlides(): UseHeroSlidesReturn {\n  const [slides, setSlides] = useState<HeroSlide[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n  const { currentLanguage } = useLanguage();\n\n  const fetchSlides = async () => {\n      try {\n        setLoading(true);\n        setError(null);\n\n        const locale = currentLanguage === 'en' ? 'en' : 'fr';\n        const response = await fetch(\n          `https://${projectId}.supabase.co/functions/v1/make-server-98c6ec1c/api/hero-slides?locale=${locale}`,\n          {\n            headers: {\n              'Authorization': `Bearer ${publicAnonKey}`,\n              'Content-Type': 'application/json',\n            },\n          }\n        );\n\n        if (!response.ok) {\n          throw new Error(`HTTP error! status: ${response.status}`);\n        }\n\n        const result = await response.json();\n\n        if (result.success && result.data) {\n          setSlides(result.data);\n        } else {\n          throw new Error(result.error || 'Failed to fetch hero slides');\n        }\n      } catch (err) {\n        // Log silencieux pour \"Failed to fetch\" (serveur non accessible)\n        const errorMessage = err instanceof Error ? err.message : 'An error occurred';\n        if (errorMessage.includes('Failed to fetch')) {\n          console.log('‚ÑπÔ∏è Hero slides backend not available, using fallback slides');\n        } else {\n          console.error('Error fetching hero slides:', err);\n        }\n        setError(errorMessage);\n        \n        // Fallback vers un slide par d√©faut en cas d'erreur\n        setSlides([{\n          id: 'fallback-1',\n          sort_order: 1,\n          background_image_url: 'https://images.unsplash.com/photo-1718939045285-b67f9e9f9f8b?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3Nzg4Nzd8MHwxfHNlYXJjaHwxfHxsdXh1cnklMjBiZWRyb29tJTIwZGVzaWduJTIwY29tZm9ydGFibGV8ZW58MXx8fHwxNzU4MTA2MzMxfDA&ixlib=rb-4.1.0&q=80&w=1080',\n          is_video: false,\n          slide_duration: 5000,\n          video_loop: true,\n          is_active: true,\n          cta_bg_color: '#FFFFFF',\n          cta_text_color: '#B5C233',\n          translation: {\n            title: 'FIMA Couchage',\n            subtitle: 'LITERIE PREMIUM',\n            description: 'Matelas, sommiers et accessoires.',\n            cta_primary: 'D√©couvrir nos produits',\n            badge: '14 NUITS D\\'ESSAI'\n          }\n        }]);\n      } finally {\n        setLoading(false);\n      }\n    };\n\n  useEffect(() => {\n    fetchSlides();\n  }, [currentLanguage]);\n\n  return { slides, loading, error, refetch: fetchSlides };\n}"],"names":[],"mappings":";;;;AAAA;AACA;AACA;;;;;AAoCO,SAAS;;IACd,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,sIAAQ,EAAc,EAAE;IACpD,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,sIAAQ,EAAC;IACvC,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,sIAAQ,EAAgB;IAClD,MAAM,EAAE,eAAe,EAAE,GAAG,IAAA,sIAAW;IAEvC,MAAM,cAAc;QAChB,IAAI;YACF,WAAW;YACX,SAAS;YAET,MAAM,SAAS,oBAAoB,OAAO,OAAO;YACjD,MAAM,WAAW,MAAM,MACrB,CAAC,QAAQ,EAAE,0IAAS,CAAC,sEAAsE,EAAE,QAAQ,EACrG;gBACE,SAAS;oBACP,iBAAiB,CAAC,OAAO,EAAE,8IAAa,EAAE;oBAC1C,gBAAgB;gBAClB;YACF;YAGF,IAAI,CAAC,SAAS,EAAE,EAAE;gBAChB,MAAM,IAAI,MAAM,CAAC,oBAAoB,EAAE,SAAS,MAAM,EAAE;YAC1D;YAEA,MAAM,SAAS,MAAM,SAAS,IAAI;YAElC,IAAI,OAAO,OAAO,IAAI,OAAO,IAAI,EAAE;gBACjC,UAAU,OAAO,IAAI;YACvB,OAAO;gBACL,MAAM,IAAI,MAAM,OAAO,KAAK,IAAI;YAClC;QACF,EAAE,OAAO,KAAK;YACZ,iEAAiE;YACjE,MAAM,eAAe,eAAe,QAAQ,IAAI,OAAO,GAAG;YAC1D,IAAI,aAAa,QAAQ,CAAC,oBAAoB;gBAC5C,QAAQ,GAAG,CAAC;YACd,OAAO;gBACL,QAAQ,KAAK,CAAC,+BAA+B;YAC/C;YACA,SAAS;YAET,oDAAoD;YACpD,UAAU;gBAAC;oBACT,IAAI;oBACJ,YAAY;oBACZ,sBAAsB;oBACtB,UAAU;oBACV,gBAAgB;oBAChB,YAAY;oBACZ,WAAW;oBACX,cAAc;oBACd,gBAAgB;oBAChB,aAAa;wBACX,OAAO;wBACP,UAAU;wBACV,aAAa;wBACb,aAAa;wBACb,OAAO;oBACT;gBACF;aAAE;QACJ,SAAU;YACR,WAAW;QACb;IACF;IAEF,IAAA,uIAAS;mCAAC;YACR;QACF;kCAAG;QAAC;KAAgB;IAEpB,OAAO;QAAE;QAAQ;QAAS;QAAO,SAAS;IAAY;AACxD;GAxEgB;;QAIc,sIAAW"}},
    {"offset": {"line": 1208, "column": 0}, "map": {"version":3,"sources":["file:///c:/Users/HP/projects/fimaWebsite/src/hooks/useLogoScrollAnimation.ts"],"sourcesContent":["import { useState, useEffect } from 'react';\n\ninterface UseLogoScrollAnimationOptions {\n  /** Seuil de scroll en pixels pour d√©clencher l'animation (d√©faut: 50) */\n  threshold?: number;\n}\n\n/**\n * Hook pour g√©rer l'animation du logo au scroll\n * \n * Retourne un √©tat `hasScrolled` qui devient true quand l'utilisateur\n * a scroll√© au-del√† du seuil d√©fini.\n * \n * @param options - Options de configuration\n * @returns √âtat du scroll\n */\nexport function useLogoScrollAnimation(options: UseLogoScrollAnimationOptions = {}) {\n  const { threshold = 50 } = options;\n  const [hasScrolled, setHasScrolled] = useState(false);\n\n  useEffect(() => {\n    const handleScroll = () => {\n      const scrollY = window.scrollY || window.pageYOffset;\n      \n      if (scrollY > threshold) {\n        setHasScrolled(true);\n      } else {\n        setHasScrolled(false);\n      }\n    };\n\n    // V√©rifier imm√©diatement au montage\n    handleScroll();\n\n    window.addEventListener('scroll', handleScroll, { passive: true });\n    \n    return () => {\n      window.removeEventListener('scroll', handleScroll);\n    };\n  }, [threshold]);\n\n  return { hasScrolled };\n}\n"],"names":[],"mappings":";;;;AAAA;;;AAgBO,SAAS,uBAAuB,UAAyC,CAAC,CAAC;;IAChF,MAAM,EAAE,YAAY,EAAE,EAAE,GAAG;IAC3B,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,sIAAQ,EAAC;IAE/C,IAAA,uIAAS;4CAAC;YACR,MAAM;iEAAe;oBACnB,MAAM,UAAU,OAAO,OAAO,IAAI,OAAO,WAAW;oBAEpD,IAAI,UAAU,WAAW;wBACvB,eAAe;oBACjB,OAAO;wBACL,eAAe;oBACjB;gBACF;;YAEA,oCAAoC;YACpC;YAEA,OAAO,gBAAgB,CAAC,UAAU,cAAc;gBAAE,SAAS;YAAK;YAEhE;oDAAO;oBACL,OAAO,mBAAmB,CAAC,UAAU;gBACvC;;QACF;2CAAG;QAAC;KAAU;IAEd,OAAO;QAAE;IAAY;AACvB;GA1BgB"}},
    {"offset": {"line": 1257, "column": 0}, "map": {"version":3,"sources":["file:///c:/Users/HP/projects/fimaWebsite/src/hooks/useCurrency.ts"],"sourcesContent":["import { useApp } from '../contexts/AppContext';\nimport { formatCurrency, formatPriceForDisplay, CurrencyCode } from '../utils/currency';\n\n/**\n * Hook personnalis√© pour g√©rer l'affichage des prix avec la devise s√©lectionn√©e\n */\nexport function useCurrency() {\n  const { selectedCurrency } = useApp();\n\n  /**\n   * Formate un prix selon la devise s√©lectionn√©e\n   * @param eurPrice Prix en euros (base)\n   * @returns Prix format√© avec symbole\n   */\n  const formatPrice = (eurPrice: number | string): string => {\n    return formatCurrency(eurPrice, selectedCurrency);\n  };\n\n  /**\n   * Formate un prix avec prix barr√© optionnel\n   * @param price Prix actuel en euros\n   * @param originalPrice Prix original en euros (optionnel)\n   * @returns Objet avec prix format√©s\n   */\n  const formatPriceWithDiscount = (price: number | string, originalPrice?: number | string) => {\n    return formatPriceForDisplay(price, originalPrice, selectedCurrency);\n  };\n\n  return {\n    selectedCurrency,\n    formatPrice,\n    formatPriceWithDiscount,\n  };\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;;;;AAKO,SAAS;;IACd,MAAM,EAAE,gBAAgB,EAAE,GAAG,IAAA,oIAAM;IAEnC;;;;GAIC,GACD,MAAM,cAAc,CAAC;QACnB,OAAO,IAAA,sIAAc,EAAC,UAAU;IAClC;IAEA;;;;;GAKC,GACD,MAAM,0BAA0B,CAAC,OAAwB;QACvD,OAAO,IAAA,6IAAqB,EAAC,OAAO,eAAe;IACrD;IAEA,OAAO;QACL;QACA;QACA;IACF;AACF;GA3BgB;;QACe,oIAAM"}},
    {"offset": {"line": 1302, "column": 0}, "map": {"version":3,"sources":["file:///c:/Users/HP/projects/fimaWebsite/src/hooks/useScrollToTop.ts"],"sourcesContent":["import { useEffect, useCallback } from 'react';\n\n/**\n * Hook personnalis√© pour g√©rer le scroll vers le haut de mani√®re fiable\n * Prend en compte les composants lazy-loaded et les animations\n */\nexport const useScrollToTop = () => {\n  const scrollToTop = useCallback(() => {\n    // Scroll imm√©diat synchrone d'abord\n    window.scrollTo(0, 0);\n    \n    // Force scroll pour les cas o√π le contenu n'est pas encore rendu\n    requestAnimationFrame(() => {\n      window.scrollTo({ top: 0, behavior: 'instant' });\n      \n      // Double s√©curit√© apr√®s un d√©lai minimal\n      setTimeout(() => {\n        if (window.scrollY > 0) {\n          window.scrollTo({ top: 0, behavior: 'instant' });\n        }\n      }, 50);\n    });\n  }, []);\n\n  return scrollToTop;\n};\n\n/**\n * Hook qui s'ex√©cute automatiquement le scroll to top sur le mount du composant\n * Utile pour les pages lazy-loaded\n */\nexport const useAutoScrollToTop = (dependency?: any) => {\n  const scrollToTop = useScrollToTop();\n  \n  useEffect(() => {\n    scrollToTop();\n  }, [dependency, scrollToTop]);\n};"],"names":[],"mappings":";;;;;;AAAA;;;AAMO,MAAM,iBAAiB;;IAC5B,MAAM,cAAc,IAAA,yIAAW;mDAAC;YAC9B,oCAAoC;YACpC,OAAO,QAAQ,CAAC,GAAG;YAEnB,iEAAiE;YACjE;2DAAsB;oBACpB,OAAO,QAAQ,CAAC;wBAAE,KAAK;wBAAG,UAAU;oBAAU;oBAE9C,yCAAyC;oBACzC;mEAAW;4BACT,IAAI,OAAO,OAAO,GAAG,GAAG;gCACtB,OAAO,QAAQ,CAAC;oCAAE,KAAK;oCAAG,UAAU;gCAAU;4BAChD;wBACF;kEAAG;gBACL;;QACF;kDAAG,EAAE;IAEL,OAAO;AACT;GAnBa;AAyBN,MAAM,qBAAqB,CAAC;;IACjC,MAAM,cAAc;IAEpB,IAAA,uIAAS;wCAAC;YACR;QACF;uCAAG;QAAC;QAAY;KAAY;AAC9B;IANa;;QACS"}},
    {"offset": {"line": 1366, "column": 0}, "map": {"version":3,"sources":["file:///c:/Users/HP/projects/fimaWebsite/src/hooks/useNavigationPersistence.ts"],"sourcesContent":["import { useEffect, useCallback } from 'react';\n\ntype ViewType = \n  | 'home' \n  | 'product' \n  | 'all-products' \n  | 'category'\n  | 'category-detail'\n  | 'fima-couchage'\n  | 'fima-design' \n  | 'univers-glass'\n  | 'b2b-solutions'\n  | 'large-accounts'\n  | 'content-hub'\n  | 'all-projects'\n  | 'project-detail'\n  | 'article-detail'\n  | 'careers'\n  | 'our-history'\n  | 'our-certifications'\n  | 'checkout'\n  | 'auth'\n  | 'login'\n  | 'signup'\n  | 'account'\n  | 'order-detail'\n  | 'order-tracking'\n  | 'sitemap'\n  | 'brand-guidelines'\n  | 'cms';\n\ninterface NavigationState {\n  view: ViewType;\n  selectedProduct?: any;\n  selectedProject?: any;\n  selectedArticle?: any;\n  selectedCategory?: string;\n  categoryDetailSlug?: string;\n  selectedOrderId?: string;\n  initialCategoryFilter?: string;\n}\n\nconst STORAGE_KEY = 'fima_navigation_state';\n\n/**\n * Hook pour g√©rer la persistence de la navigation\n * - Sauvegarde l'√©tat dans localStorage\n * - Synchronise avec l'URL du navigateur\n * - Restaure l'√©tat lors du rechargement\n */\nexport function useNavigationPersistence() {\n  /**\n   * Sauvegarde l'√©tat de navigation\n   */\n  const saveNavigationState = useCallback((state: NavigationState) => {\n    try {\n      // Sauvegarder dans localStorage\n      localStorage.setItem(STORAGE_KEY, JSON.stringify(state));\n      \n      // Mettre √† jour l'URL sans recharger la page\n      const url = getUrlFromState(state);\n      if (url !== window.location.pathname + window.location.search) {\n        window.history.pushState({ ...state }, '', url);\n      }\n    } catch (error) {\n      console.error('Erreur lors de la sauvegarde de la navigation:', error);\n    }\n  }, []);\n\n  /**\n   * Restaure l'√©tat de navigation depuis l'URL ou localStorage\n   */\n  const restoreNavigationState = useCallback((): NavigationState | null => {\n    try {\n      // D'abord, essayer de parser l'URL\n      const urlState = getStateFromUrl();\n      if (urlState) {\n        return urlState;\n      }\n\n      // Sinon, utiliser localStorage\n      const stored = localStorage.getItem(STORAGE_KEY);\n      if (stored) {\n        return JSON.parse(stored);\n      }\n    } catch (error) {\n      console.error('Erreur lors de la restauration de la navigation:', error);\n    }\n    return null;\n  }, []);\n\n  /**\n   * Efface l'√©tat de navigation\n   */\n  const clearNavigationState = useCallback(() => {\n    try {\n      localStorage.removeItem(STORAGE_KEY);\n      window.history.pushState({}, '', '/');\n    } catch (error) {\n      console.error('Erreur lors de l\\'effacement de la navigation:', error);\n    }\n  }, []);\n\n  /**\n   * G√®re le bouton retour du navigateur\n   */\n  useEffect(() => {\n    const handlePopState = (event: PopStateEvent) => {\n      if (event.state) {\n        // L'√©tat est d√©j√† dans event.state, le composant parent devra le g√©rer\n        console.log('Navigation arri√®re d√©tect√©e:', event.state);\n      }\n    };\n\n    window.addEventListener('popstate', handlePopState);\n    return () => window.removeEventListener('popstate', handlePopState);\n  }, []);\n\n  return {\n    saveNavigationState,\n    restoreNavigationState,\n    clearNavigationState\n  };\n}\n\n/**\n * Convertit un √©tat de navigation en URL\n */\nfunction getUrlFromState(state: NavigationState): string {\n  switch (state.view) {\n    case 'home':\n      return '/';\n    case 'product':\n      return `/product/${state.selectedProduct?.slug || state.selectedProduct?.id || ''}`;\n    case 'all-products':\n      return state.initialCategoryFilter \n        ? `/products?category=${encodeURIComponent(state.initialCategoryFilter)}`\n        : '/products';\n    case 'category':\n      return `/category/${encodeURIComponent(state.selectedCategory || '')}`;\n    case 'category-detail':\n      return `/category-detail/${encodeURIComponent(state.categoryDetailSlug || '')}`;\n    case 'fima-couchage':\n      return '/fima-couchage';\n    case 'fima-design':\n      return '/fima-design';\n    case 'univers-glass':\n      return '/univers-glass';\n    case 'b2b-solutions':\n      return '/b2b-solutions';\n    case 'large-accounts':\n      return '/large-accounts';\n    case 'content-hub':\n      return '/content-hub';\n    case 'all-projects':\n      return '/projects';\n    case 'project-detail':\n      return `/project/${state.selectedProject?.slug || state.selectedProject?.id || ''}`;\n    case 'article-detail':\n      return `/article/${state.selectedArticle?.slug || state.selectedArticle?.id || ''}`;\n    case 'careers':\n      return '/careers';\n    case 'our-history':\n      return '/our-history';\n    case 'our-certifications':\n      return '/our-certifications';\n    case 'checkout':\n      return '/checkout';\n    case 'auth':\n    case 'login':\n      return '/login';\n    case 'signup':\n      return '/signup';\n    case 'account':\n      return '/account';\n    case 'order-detail':\n      return `/order/${state.selectedOrderId || ''}`;\n    case 'order-tracking':\n      return `/order-tracking/${state.selectedOrderId || ''}`;\n    case 'sitemap':\n      return '/sitemap';\n    case 'brand-guidelines':\n      return '/brand-guidelines';\n    case 'cms':\n      return '/cms';\n    default:\n      return '/';\n  }\n}\n\n/**\n * Parse l'URL pour extraire l'√©tat de navigation\n */\nfunction getStateFromUrl(): NavigationState | null {\n  const path = window.location.pathname;\n  const params = new URLSearchParams(window.location.search);\n\n  // Home\n  if (path === '/' || path === '') {\n    return { view: 'home' };\n  }\n\n  // Product detail\n  if (path.startsWith('/product/')) {\n    const id = path.replace('/product/', '');\n    if (id) {\n      // On ne peut pas restaurer le produit complet depuis l'URL\n      // Le composant devra le charger depuis l'ID\n      return { view: 'product', selectedProduct: { id } };\n    }\n  }\n\n  // All products\n  if (path === '/products') {\n    const category = params.get('category');\n    return { \n      view: 'all-products',\n      initialCategoryFilter: category || undefined\n    };\n  }\n\n  // Category\n  if (path.startsWith('/category/') && !path.startsWith('/category-detail/')) {\n    const category = decodeURIComponent(path.replace('/category/', ''));\n    return { view: 'category', selectedCategory: category };\n  }\n\n  // Category detail\n  if (path.startsWith('/category-detail/')) {\n    const slug = decodeURIComponent(path.replace('/category-detail/', ''));\n    return { view: 'category-detail', categoryDetailSlug: slug };\n  }\n\n  // Business units\n  if (path === '/fima-couchage') return { view: 'fima-couchage' };\n  if (path === '/fima-design') return { view: 'fima-design' };\n  if (path === '/univers-glass') return { view: 'univers-glass' };\n  if (path === '/b2b-solutions') return { view: 'b2b-solutions' };\n  if (path === '/large-accounts') return { view: 'large-accounts' };\n\n  // Content\n  if (path === '/content-hub') return { view: 'content-hub' };\n  if (path === '/projects') return { view: 'all-projects' };\n  \n  if (path.startsWith('/project/')) {\n    const id = path.replace('/project/', '');\n    return { view: 'project-detail', selectedProject: { id } };\n  }\n  \n  if (path.startsWith('/article/')) {\n    const id = path.replace('/article/', '');\n    return { view: 'article-detail', selectedArticle: { id } };\n  }\n\n  // Company pages\n  if (path === '/careers') return { view: 'careers' };\n  if (path === '/our-history') return { view: 'our-history' };\n  if (path === '/our-certifications') return { view: 'our-certifications' };\n\n  // Auth & Account\n  if (path === '/login') return { view: 'login' };\n  if (path === '/signup') return { view: 'signup' };\n  if (path === '/account') return { view: 'account' };\n  if (path === '/checkout') return { view: 'checkout' };\n\n  // Orders\n  if (path.startsWith('/order/') && !path.startsWith('/order-tracking/')) {\n    const orderId = path.replace('/order/', '');\n    return { view: 'order-detail', selectedOrderId: orderId };\n  }\n  \n  if (path.startsWith('/order-tracking/')) {\n    const orderId = path.replace('/order-tracking/', '');\n    return { view: 'order-tracking', selectedOrderId: orderId };\n  }\n\n  // Other pages\n  if (path === '/sitemap') return { view: 'sitemap' };\n  if (path === '/brand-guidelines') return { view: 'brand-guidelines' };\n  if (path === '/cms' || path.startsWith('/cms/')) return { view: 'cms' };\n\n  return null;\n}\n"],"names":[],"mappings":";;;;AAAA;;;AA0CA,MAAM,cAAc;AAQb,SAAS;;IACd;;GAEC,GACD,MAAM,sBAAsB,IAAA,yIAAW;qEAAC,CAAC;YACvC,IAAI;gBACF,gCAAgC;gBAChC,aAAa,OAAO,CAAC,aAAa,KAAK,SAAS,CAAC;gBAEjD,6CAA6C;gBAC7C,MAAM,MAAM,gBAAgB;gBAC5B,IAAI,QAAQ,OAAO,QAAQ,CAAC,QAAQ,GAAG,OAAO,QAAQ,CAAC,MAAM,EAAE;oBAC7D,OAAO,OAAO,CAAC,SAAS,CAAC;wBAAE,GAAG,KAAK;oBAAC,GAAG,IAAI;gBAC7C;YACF,EAAE,OAAO,OAAO;gBACd,QAAQ,KAAK,CAAC,kDAAkD;YAClE;QACF;oEAAG,EAAE;IAEL;;GAEC,GACD,MAAM,yBAAyB,IAAA,yIAAW;wEAAC;YACzC,IAAI;gBACF,mCAAmC;gBACnC,MAAM,WAAW;gBACjB,IAAI,UAAU;oBACZ,OAAO;gBACT;gBAEA,+BAA+B;gBAC/B,MAAM,SAAS,aAAa,OAAO,CAAC;gBACpC,IAAI,QAAQ;oBACV,OAAO,KAAK,KAAK,CAAC;gBACpB;YACF,EAAE,OAAO,OAAO;gBACd,QAAQ,KAAK,CAAC,oDAAoD;YACpE;YACA,OAAO;QACT;uEAAG,EAAE;IAEL;;GAEC,GACD,MAAM,uBAAuB,IAAA,yIAAW;sEAAC;YACvC,IAAI;gBACF,aAAa,UAAU,CAAC;gBACxB,OAAO,OAAO,CAAC,SAAS,CAAC,CAAC,GAAG,IAAI;YACnC,EAAE,OAAO,OAAO;gBACd,QAAQ,KAAK,CAAC,kDAAkD;YAClE;QACF;qEAAG,EAAE;IAEL;;GAEC,GACD,IAAA,uIAAS;8CAAC;YACR,MAAM;qEAAiB,CAAC;oBACtB,IAAI,MAAM,KAAK,EAAE;wBACf,uEAAuE;wBACvE,QAAQ,GAAG,CAAC,gCAAgC,MAAM,KAAK;oBACzD;gBACF;;YAEA,OAAO,gBAAgB,CAAC,YAAY;YACpC;sDAAO,IAAM,OAAO,mBAAmB,CAAC,YAAY;;QACtD;6CAAG,EAAE;IAEL,OAAO;QACL;QACA;QACA;IACF;AACF;GAzEgB;AA2EhB;;CAEC,GACD,SAAS,gBAAgB,KAAsB;IAC7C,OAAQ,MAAM,IAAI;QAChB,KAAK;YACH,OAAO;QACT,KAAK;YACH,OAAO,CAAC,SAAS,EAAE,MAAM,eAAe,EAAE,QAAQ,MAAM,eAAe,EAAE,MAAM,IAAI;QACrF,KAAK;YACH,OAAO,MAAM,qBAAqB,GAC9B,CAAC,mBAAmB,EAAE,mBAAmB,MAAM,qBAAqB,GAAG,GACvE;QACN,KAAK;YACH,OAAO,CAAC,UAAU,EAAE,mBAAmB,MAAM,gBAAgB,IAAI,KAAK;QACxE,KAAK;YACH,OAAO,CAAC,iBAAiB,EAAE,mBAAmB,MAAM,kBAAkB,IAAI,KAAK;QACjF,KAAK;YACH,OAAO;QACT,KAAK;YACH,OAAO;QACT,KAAK;YACH,OAAO;QACT,KAAK;YACH,OAAO;QACT,KAAK;YACH,OAAO;QACT,KAAK;YACH,OAAO;QACT,KAAK;YACH,OAAO;QACT,KAAK;YACH,OAAO,CAAC,SAAS,EAAE,MAAM,eAAe,EAAE,QAAQ,MAAM,eAAe,EAAE,MAAM,IAAI;QACrF,KAAK;YACH,OAAO,CAAC,SAAS,EAAE,MAAM,eAAe,EAAE,QAAQ,MAAM,eAAe,EAAE,MAAM,IAAI;QACrF,KAAK;YACH,OAAO;QACT,KAAK;YACH,OAAO;QACT,KAAK;YACH,OAAO;QACT,KAAK;YACH,OAAO;QACT,KAAK;QACL,KAAK;YACH,OAAO;QACT,KAAK;YACH,OAAO;QACT,KAAK;YACH,OAAO;QACT,KAAK;YACH,OAAO,CAAC,OAAO,EAAE,MAAM,eAAe,IAAI,IAAI;QAChD,KAAK;YACH,OAAO,CAAC,gBAAgB,EAAE,MAAM,eAAe,IAAI,IAAI;QACzD,KAAK;YACH,OAAO;QACT,KAAK;YACH,OAAO;QACT,KAAK;YACH,OAAO;QACT;YACE,OAAO;IACX;AACF;AAEA;;CAEC,GACD,SAAS;IACP,MAAM,OAAO,OAAO,QAAQ,CAAC,QAAQ;IACrC,MAAM,SAAS,IAAI,gBAAgB,OAAO,QAAQ,CAAC,MAAM;IAEzD,OAAO;IACP,IAAI,SAAS,OAAO,SAAS,IAAI;QAC/B,OAAO;YAAE,MAAM;QAAO;IACxB;IAEA,iBAAiB;IACjB,IAAI,KAAK,UAAU,CAAC,cAAc;QAChC,MAAM,KAAK,KAAK,OAAO,CAAC,aAAa;QACrC,IAAI,IAAI;YACN,2DAA2D;YAC3D,4CAA4C;YAC5C,OAAO;gBAAE,MAAM;gBAAW,iBAAiB;oBAAE;gBAAG;YAAE;QACpD;IACF;IAEA,eAAe;IACf,IAAI,SAAS,aAAa;QACxB,MAAM,WAAW,OAAO,GAAG,CAAC;QAC5B,OAAO;YACL,MAAM;YACN,uBAAuB,YAAY;QACrC;IACF;IAEA,WAAW;IACX,IAAI,KAAK,UAAU,CAAC,iBAAiB,CAAC,KAAK,UAAU,CAAC,sBAAsB;QAC1E,MAAM,WAAW,mBAAmB,KAAK,OAAO,CAAC,cAAc;QAC/D,OAAO;YAAE,MAAM;YAAY,kBAAkB;QAAS;IACxD;IAEA,kBAAkB;IAClB,IAAI,KAAK,UAAU,CAAC,sBAAsB;QACxC,MAAM,OAAO,mBAAmB,KAAK,OAAO,CAAC,qBAAqB;QAClE,OAAO;YAAE,MAAM;YAAmB,oBAAoB;QAAK;IAC7D;IAEA,iBAAiB;IACjB,IAAI,SAAS,kBAAkB,OAAO;QAAE,MAAM;IAAgB;IAC9D,IAAI,SAAS,gBAAgB,OAAO;QAAE,MAAM;IAAc;IAC1D,IAAI,SAAS,kBAAkB,OAAO;QAAE,MAAM;IAAgB;IAC9D,IAAI,SAAS,kBAAkB,OAAO;QAAE,MAAM;IAAgB;IAC9D,IAAI,SAAS,mBAAmB,OAAO;QAAE,MAAM;IAAiB;IAEhE,UAAU;IACV,IAAI,SAAS,gBAAgB,OAAO;QAAE,MAAM;IAAc;IAC1D,IAAI,SAAS,aAAa,OAAO;QAAE,MAAM;IAAe;IAExD,IAAI,KAAK,UAAU,CAAC,cAAc;QAChC,MAAM,KAAK,KAAK,OAAO,CAAC,aAAa;QACrC,OAAO;YAAE,MAAM;YAAkB,iBAAiB;gBAAE;YAAG;QAAE;IAC3D;IAEA,IAAI,KAAK,UAAU,CAAC,cAAc;QAChC,MAAM,KAAK,KAAK,OAAO,CAAC,aAAa;QACrC,OAAO;YAAE,MAAM;YAAkB,iBAAiB;gBAAE;YAAG;QAAE;IAC3D;IAEA,gBAAgB;IAChB,IAAI,SAAS,YAAY,OAAO;QAAE,MAAM;IAAU;IAClD,IAAI,SAAS,gBAAgB,OAAO;QAAE,MAAM;IAAc;IAC1D,IAAI,SAAS,uBAAuB,OAAO;QAAE,MAAM;IAAqB;IAExE,iBAAiB;IACjB,IAAI,SAAS,UAAU,OAAO;QAAE,MAAM;IAAQ;IAC9C,IAAI,SAAS,WAAW,OAAO;QAAE,MAAM;IAAS;IAChD,IAAI,SAAS,YAAY,OAAO;QAAE,MAAM;IAAU;IAClD,IAAI,SAAS,aAAa,OAAO;QAAE,MAAM;IAAW;IAEpD,SAAS;IACT,IAAI,KAAK,UAAU,CAAC,cAAc,CAAC,KAAK,UAAU,CAAC,qBAAqB;QACtE,MAAM,UAAU,KAAK,OAAO,CAAC,WAAW;QACxC,OAAO;YAAE,MAAM;YAAgB,iBAAiB;QAAQ;IAC1D;IAEA,IAAI,KAAK,UAAU,CAAC,qBAAqB;QACvC,MAAM,UAAU,KAAK,OAAO,CAAC,oBAAoB;QACjD,OAAO;YAAE,MAAM;YAAkB,iBAAiB;QAAQ;IAC5D;IAEA,cAAc;IACd,IAAI,SAAS,YAAY,OAAO;QAAE,MAAM;IAAU;IAClD,IAAI,SAAS,qBAAqB,OAAO;QAAE,MAAM;IAAmB;IACpE,IAAI,SAAS,UAAU,KAAK,UAAU,CAAC,UAAU,OAAO;QAAE,MAAM;IAAM;IAEtE,OAAO;AACT"}},
    {"offset": {"line": 1661, "column": 0}, "map": {"version":3,"sources":["file:///c:/Users/HP/projects/fimaWebsite/src/hooks/useFavicon.ts"],"sourcesContent":["import { useEffect } from 'react';\n\n/**\n * Hook pour d√©finir le favicon du site dynamiquement\n * @param faviconUrl - URL de l'image √† utiliser comme favicon\n */\nexport const useFavicon = (faviconUrl: string) => {\n  useEffect(() => {\n    // Supprimer les anciens favicons\n    const existingLinks = document.querySelectorAll(\"link[rel*='icon']\");\n    existingLinks.forEach(link => link.remove());\n\n    // Cr√©er le nouveau favicon principal\n    const link = document.createElement('link');\n    link.rel = 'icon';\n    link.type = 'image/png';\n    link.href = faviconUrl;\n    document.head.appendChild(link);\n\n    // Ajouter aussi apple-touch-icon pour iOS\n    const appleLink = document.createElement('link');\n    appleLink.rel = 'apple-touch-icon';\n    appleLink.href = faviconUrl;\n    document.head.appendChild(appleLink);\n\n    // Mettre √† jour le titre si n√©cessaire\n    if (!document.title || document.title === 'React App') {\n      document.title = 'FIMA - Literie, Menuiserie & Vitrerie depuis 1985';\n    }\n\n    // Cleanup\n    return () => {\n      // On ne supprime pas au d√©montage pour √©viter de perdre le favicon\n    };\n  }, [faviconUrl]);\n};\n"],"names":[],"mappings":";;;;AAAA;;;AAMO,MAAM,aAAa,CAAC;;IACzB,IAAA,uIAAS;gCAAC;YACR,iCAAiC;YACjC,MAAM,gBAAgB,SAAS,gBAAgB,CAAC;YAChD,cAAc,OAAO;wCAAC,CAAA,OAAQ,KAAK,MAAM;;YAEzC,qCAAqC;YACrC,MAAM,OAAO,SAAS,aAAa,CAAC;YACpC,KAAK,GAAG,GAAG;YACX,KAAK,IAAI,GAAG;YACZ,KAAK,IAAI,GAAG;YACZ,SAAS,IAAI,CAAC,WAAW,CAAC;YAE1B,0CAA0C;YAC1C,MAAM,YAAY,SAAS,aAAa,CAAC;YACzC,UAAU,GAAG,GAAG;YAChB,UAAU,IAAI,GAAG;YACjB,SAAS,IAAI,CAAC,WAAW,CAAC;YAE1B,uCAAuC;YACvC,IAAI,CAAC,SAAS,KAAK,IAAI,SAAS,KAAK,KAAK,aAAa;gBACrD,SAAS,KAAK,GAAG;YACnB;YAEA,UAAU;YACV;wCAAO;gBACL,mEAAmE;gBACrE;;QACF;+BAAG;QAAC;KAAW;AACjB;GA7Ba"}},
    {"offset": {"line": 1711, "column": 0}, "map": {"version":3,"sources":["file:///c:/Users/HP/projects/fimaWebsite/src/hooks/useProducts.ts"],"sourcesContent":["import { useState, useEffect } from 'react';\nimport { projectId, publicAnonKey } from '../utils/supabase/info';\n\n// Types pour les variations de produits\nexport interface ProductVariation {\n  id: string;\n  name: string; // ex: \"1 place (90x190 cm)\"\n  price: number;\n  sku?: string; // SKU sp√©cifique √† la variation\n  stock?: number;\n  compareAtPrice?: number;\n}\n\n// Types pour les produits\nexport interface Product {\n  id: string;\n  name: string;\n  sku: string;\n  category: string;\n  business: string; // fima-couchage, fima-design, univers-glass\n  price: number;\n  compareAtPrice?: number;\n  currency?: string; // 'FCFA', 'EUR', 'USD' - devise dans laquelle le prix est stock√©\n  stock: number;\n  lowStockThreshold?: number;\n  unit: string; // 'pi√®ce', 'm¬≤', 'ml', etc.\n  description: string;\n  shortDescription?: string;\n  tagline?: string; // Phrase accrocheuse du produit\n  images: string[];\n  tags?: string[];\n  featured?: boolean;\n  badge?: string | null;\n  discount?: string | null;\n  \n  // Nouveaux champs pour les onglets de d√©tail produit\n  features?: string; // Caract√©ristiques techniques (HTML du RichTextEditor)\n  benefits?: string[]; // B√©n√©fices s√©lectionn√©s (multiselect)\n  isCustom?: boolean; // Produit sur mesure (prix sur devis)\n  \n  // Variations de produit (ex: diff√©rentes tailles avec prix diff√©rents)\n  variations?: ProductVariation[];\n  \n  // Attributs sp√©cifiques m√©tier\n  firmness?: string; // Pour matelas: 'Ferme', 'M√©dium', 'Moelleux'\n  material?: string; // 'Ressorts', 'Latex', 'M√©moire de forme', 'Bois', etc.\n  size?: string[]; // Tailles disponibles\n  specifications?: Record<string, any>; // Sp√©cifications techniques personnalis√©es\n  \n  // Gestion\n  status: 'active' | 'inactive' | 'out-of-stock' | 'out_of_stock';\n  seo?: {\n    title?: string;\n    description?: string;\n    keywords?: string[];\n  };\n  \n  createdAt: string;\n  updatedAt?: string;\n}\n\nconst API_BASE_URL = `https://${projectId}.supabase.co/functions/v1/make-server-98c6ec1c`;\n\n/**\n * Hook pour r√©cup√©rer les produits depuis l'API backend\n * @param business - M√©tier optionnel pour filtrer\n * @param category - Cat√©gorie optionnelle pour filtrer\n * @param featuredOnly - Afficher uniquement les produits featured\n * @param refreshKey - Cl√© pour forcer le rafra√Æchissement\n * @param includeInactive - Inclure les produits inactifs (pour le CMS uniquement)\n */\nexport const useProducts = (\n  business?: string,\n  category?: string,\n  featuredOnly: boolean = false,\n  refreshKey: number = 0,\n  includeInactive: boolean = false\n) => {\n  const [products, setProducts] = useState<Product[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n\n  useEffect(() => {\n    const fetchProducts = async () => {\n      try {\n        setLoading(true);\n        setError(null);\n\n        const url = new URL(`${API_BASE_URL}/products`);\n        \n        // Ajouter les param√®tres de filtrage\n        if (business && business !== 'all') {\n          url.searchParams.append('business', business);\n        }\n        if (category && category !== 'all') {\n          url.searchParams.append('category', category);\n        }\n        if (featuredOnly) {\n          url.searchParams.append('featured', 'true');\n        }\n        \n        const response = await fetch(url.toString(), {\n          method: 'GET',\n          headers: {\n            'Authorization': `Bearer ${publicAnonKey}`,\n            'Content-Type': 'application/json',\n          },\n        });\n\n        if (!response.ok) {\n          const errorText = await response.text().catch(() => response.statusText);\n          console.error(`HTTP ${response.status}: ${errorText}`);\n          throw new Error(`Erreur HTTP ${response.status}`);\n        }\n\n        const result = await response.json();\n        \n        if (!result.success) {\n          throw new Error(result.error || 'Erreur lors du chargement des produits');\n        }\n\n        let productsData: Product[] = result.data || [];\n\n        // Filtrer les produits actifs uniquement (sauf si includeInactive est true)\n        // includeInactive = true pour le CMS, false pour la boutique\n        if (!includeInactive) {\n          productsData = productsData.filter(p => p.status === 'active');\n        }\n\n        // Trier par featured first, puis par nom\n        productsData.sort((a, b) => {\n          // Featured first\n          if (a.featured && !b.featured) return -1;\n          if (!a.featured && b.featured) return 1;\n          \n          // Then by name\n          return a.name.localeCompare(b.name);\n        });\n\n        setProducts(productsData);\n        setError(null);\n      } catch (err) {\n        const errorMessage = err instanceof Error ? err.message : 'Erreur inconnue';\n        console.error('Error fetching products:', errorMessage);\n        \n        // En mode d√©veloppement, retourner un tableau vide plut√¥t qu'une erreur\n        // pour √©viter de bloquer l'interface\n        setError(errorMessage);\n        setProducts([]);\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    fetchProducts();\n  }, [business, category, featuredOnly, refreshKey, includeInactive]);\n\n  return { products, loading, error };\n};\n\n/**\n * Hook pour r√©cup√©rer un produit par son SKU\n * @param sku - SKU du produit\n */\nexport const useProduct = (sku: string) => {\n  const [product, setProduct] = useState<Product | null>(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n\n  useEffect(() => {\n    const fetchProduct = async () => {\n      try {\n        setLoading(true);\n        setError(null);\n\n        const response = await fetch(`${API_BASE_URL}/products/${sku}`, {\n          method: 'GET',\n          headers: {\n            'Authorization': `Bearer ${publicAnonKey}`,\n            'Content-Type': 'application/json',\n          },\n        });\n\n        if (!response.ok) {\n          throw new Error(`Erreur lors du chargement du produit: ${response.statusText}`);\n        }\n\n        const result = await response.json();\n        \n        if (!result.success) {\n          throw new Error(result.error || 'Produit non trouv√©');\n        }\n\n        setProduct(result.data);\n      } catch (err) {\n        console.error('Error fetching product:', err);\n        setError(err instanceof Error ? err.message : 'Erreur inconnue');\n        setProduct(null);\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    if (sku) {\n      fetchProduct();\n    }\n  }, [sku]);\n\n  return { product, loading, error };\n};\n\n/**\n * Hook pour cr√©er ou mettre √† jour un produit\n */\nexport const useProductMutation = () => {\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n\n  const createProduct = async (productData: Omit<Product, 'id' | 'createdAt'>) => {\n    try {\n      setLoading(true);\n      setError(null);\n\n      const response = await fetch(`${API_BASE_URL}/products`, {\n        method: 'POST',\n        headers: {\n          'Authorization': `Bearer ${publicAnonKey}`,\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify(productData),\n      });\n\n      if (!response.ok) {\n        throw new Error(`Erreur lors de la cr√©ation du produit: ${response.statusText}`);\n      }\n\n      const result = await response.json();\n      \n      if (!result.success) {\n        throw new Error(result.error || 'Erreur lors de la cr√©ation du produit');\n      }\n\n      return { success: true, data: result.data };\n    } catch (err) {\n      console.error('Error creating product:', err);\n      const errorMessage = err instanceof Error ? err.message : 'Erreur inconnue';\n      setError(errorMessage);\n      return { success: false, error: errorMessage };\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const updateProduct = async (id: string, productData: Partial<Product>) => {\n    try {\n      setLoading(true);\n      setError(null);\n\n      const response = await fetch(`${API_BASE_URL}/products/${id}`, {\n        method: 'PUT',\n        headers: {\n          'Authorization': `Bearer ${publicAnonKey}`,\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify(productData),\n      });\n\n      if (!response.ok) {\n        throw new Error(`Erreur lors de la mise √† jour du produit: ${response.statusText}`);\n      }\n\n      const result = await response.json();\n      \n      if (!result.success) {\n        throw new Error(result.error || 'Erreur lors de la mise √† jour du produit');\n      }\n\n      return { success: true, data: result.data };\n    } catch (err) {\n      console.error('Error updating product:', err);\n      const errorMessage = err instanceof Error ? err.message : 'Erreur inconnue';\n      setError(errorMessage);\n      return { success: false, error: errorMessage };\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const deleteProduct = async (id: string) => {\n    try {\n      setLoading(true);\n      setError(null);\n\n      const response = await fetch(`${API_BASE_URL}/products/${id}`, {\n        method: 'DELETE',\n        headers: {\n          'Authorization': `Bearer ${publicAnonKey}`,\n          'Content-Type': 'application/json',\n        },\n      });\n\n      if (!response.ok) {\n        throw new Error(`Erreur lors de la suppression du produit: ${response.statusText}`);\n      }\n\n      const result = await response.json();\n      \n      if (!result.success) {\n        throw new Error(result.error || 'Erreur lors de la suppression du produit');\n      }\n\n      return { success: true };\n    } catch (err) {\n      console.error('Error deleting product:', err);\n      const errorMessage = err instanceof Error ? err.message : 'Erreur inconnue';\n      setError(errorMessage);\n      return { success: false, error: errorMessage };\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return { createProduct, updateProduct, deleteProduct, loading, error };\n};"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1987, "column": 0}, "map": {"version":3,"sources":["file:///c:/Users/HP/projects/fimaWebsite/src/hooks/useVideoStories.ts"],"sourcesContent":["import { useState, useEffect } from 'react';\nimport { projectId, publicAnonKey } from '../utils/supabase/info';\n\n// Types pour les video stories bas√©s sur Types.md\nexport interface VideoStory {\n  id: string;\n  titleFr: string;\n  titleEn: string;\n  descriptionFr?: string;\n  descriptionEn?: string;\n  videoUrl: string;\n  thumbnailUrl?: string;\n  duration: string; // Format: \"2:30\"\n  category: string; // 'couchage' | 'design' | 'glass' | 'general'\n  featured?: boolean;\n  published: boolean;\n  publishedDate?: string;\n  order?: number;\n  quoteFr?: string;\n  quoteEn?: string;\n  quoteAuthorFr?: string;\n  quoteAuthorEn?: string;\n  createdAt: string;\n  updatedAt?: string;\n}\n\nconst API_BASE_URL = `https://${projectId}.supabase.co/functions/v1/make-server-98c6ec1c`;\n\n/**\n * Hook pour r√©cup√©rer les video stories depuis l'API backend\n * @param locale - Langue actuelle ('fr' ou 'en')\n * @param category - Cat√©gorie optionnelle pour filtrer\n * @param featuredOnly - Afficher uniquement les vid√©os mises en avant\n * @param publishedOnly - Afficher uniquement les vid√©os publi√©es\n */\nexport const useVideoStories = (\n  locale: 'fr' | 'en' = 'fr',\n  category?: string,\n  featuredOnly: boolean = false,\n  publishedOnly: boolean = true\n) => {\n  const [videoStories, setVideoStories] = useState<VideoStory[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n\n  const fetchVideoStories = async () => {\n      try {\n        setLoading(true);\n        setError(null);\n\n        const url = new URL(`${API_BASE_URL}/video-stories`);\n        \n        // Ajouter les param√®tres de filtrage\n        if (category) {\n          url.searchParams.append('category', category);\n        }\n        if (featuredOnly) {\n          url.searchParams.append('featured', 'true');\n        }\n        \n        const response = await fetch(url.toString(), {\n          method: 'GET',\n          headers: {\n            'Authorization': `Bearer ${publicAnonKey}`,\n            'Content-Type': 'application/json',\n          },\n        });\n\n        if (!response.ok) {\n          throw new Error(`Erreur lors du chargement des video stories: ${response.statusText}`);\n        }\n\n        const result = await response.json();\n        \n        if (!result.success) {\n          throw new Error(result.error || 'Erreur lors du chargement des video stories');\n        }\n\n        let videoStoriesData: VideoStory[] = result.data || [];\n\n        // Filtrer les vid√©os publi√©es uniquement si demand√©\n        if (publishedOnly) {\n          videoStoriesData = videoStoriesData.filter(v => v.published);\n        }\n\n        // Trier par ordre personnalis√©, puis par featured, puis par date\n        videoStoriesData.sort((a, b) => {\n          // Order first (si d√©fini)\n          if (a.order !== undefined && b.order !== undefined) {\n            if (a.order !== b.order) return a.order - b.order;\n          }\n          \n          // Featured second\n          if (a.featured && !b.featured) return -1;\n          if (!a.featured && b.featured) return 1;\n          \n          // Then by date\n          const dateA = new Date(a.publishedDate || a.createdAt).getTime();\n          const dateB = new Date(b.publishedDate || b.createdAt).getTime();\n          return dateB - dateA;\n        });\n\n        setVideoStories(videoStoriesData);\n      } catch (err) {\n        console.error('Error fetching video stories:', err);\n        setError(err instanceof Error ? err.message : 'Erreur inconnue');\n        setVideoStories([]);\n      } finally {\n        setLoading(false);\n      }\n    };\n\n  useEffect(() => {\n    fetchVideoStories();\n  }, [locale, category, featuredOnly, publishedOnly]);\n\n  return { videoStories, loading, error, refetch: fetchVideoStories };\n};\n\n/**\n * Hook pour r√©cup√©rer une video story par son ID\n * @param id - ID de la video story\n * @param locale - Langue actuelle ('fr' ou 'en')\n */\nexport const useVideoStory = (id: string, locale: 'fr' | 'en' = 'fr') => {\n  const [videoStory, setVideoStory] = useState<VideoStory | null>(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n\n  useEffect(() => {\n    const fetchVideoStory = async () => {\n      try {\n        setLoading(true);\n        setError(null);\n\n        const response = await fetch(`${API_BASE_URL}/video-stories/${id}`, {\n          method: 'GET',\n          headers: {\n            'Authorization': `Bearer ${publicAnonKey}`,\n            'Content-Type': 'application/json',\n          },\n        });\n\n        if (!response.ok) {\n          throw new Error(`Erreur lors du chargement de la video story: ${response.statusText}`);\n        }\n\n        const result = await response.json();\n        \n        if (!result.success) {\n          throw new Error(result.error || 'Video story non trouv√©e');\n        }\n\n        setVideoStory(result.data);\n      } catch (err) {\n        console.error('Error fetching video story:', err);\n        setError(err instanceof Error ? err.message : 'Erreur inconnue');\n        setVideoStory(null);\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    if (id) {\n      fetchVideoStory();\n    }\n  }, [id, locale]);\n\n  return { videoStory, loading, error };\n};\n\n/**\n * Hook pour cr√©er ou mettre √† jour une video story\n */\nexport const useVideoStoryMutation = () => {\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n\n  const createVideoStory = async (videoStoryData: Omit<VideoStory, 'id' | 'createdAt'>) => {\n    try {\n      setLoading(true);\n      setError(null);\n\n      const response = await fetch(`${API_BASE_URL}/video-stories`, {\n        method: 'POST',\n        headers: {\n          'Authorization': `Bearer ${publicAnonKey}`,\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify(videoStoryData),\n      });\n\n      if (!response.ok) {\n        throw new Error(`Erreur lors de la cr√©ation de la video story: ${response.statusText}`);\n      }\n\n      const result = await response.json();\n      \n      if (!result.success) {\n        throw new Error(result.error || 'Erreur lors de la cr√©ation de la video story');\n      }\n\n      return { success: true, data: result.data };\n    } catch (err) {\n      console.error('Error creating video story:', err);\n      const errorMessage = err instanceof Error ? err.message : 'Erreur inconnue';\n      setError(errorMessage);\n      return { success: false, error: errorMessage };\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const updateVideoStory = async (id: string, videoStoryData: Partial<VideoStory>) => {\n    try {\n      setLoading(true);\n      setError(null);\n\n      const response = await fetch(`${API_BASE_URL}/video-stories/${id}`, {\n        method: 'PUT',\n        headers: {\n          'Authorization': `Bearer ${publicAnonKey}`,\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify(videoStoryData),\n      });\n\n      if (!response.ok) {\n        throw new Error(`Erreur lors de la mise √† jour de la video story: ${response.statusText}`);\n      }\n\n      const result = await response.json();\n      \n      if (!result.success) {\n        throw new Error(result.error || 'Erreur lors de la mise √† jour de la video story');\n      }\n\n      return { success: true, data: result.data };\n    } catch (err) {\n      console.error('Error updating video story:', err);\n      const errorMessage = err instanceof Error ? err.message : 'Erreur inconnue';\n      setError(errorMessage);\n      return { success: false, error: errorMessage };\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const deleteVideoStory = async (id: string) => {\n    try {\n      setLoading(true);\n      setError(null);\n\n      const response = await fetch(`${API_BASE_URL}/video-stories/${id}`, {\n        method: 'DELETE',\n        headers: {\n          'Authorization': `Bearer ${publicAnonKey}`,\n          'Content-Type': 'application/json',\n        },\n      });\n\n      if (!response.ok) {\n        throw new Error(`Erreur lors de la suppression de la video story: ${response.statusText}`);\n      }\n\n      const result = await response.json();\n      \n      if (!result.success) {\n        throw new Error(result.error || 'Erreur lors de la suppression de la video story');\n      }\n\n      return { success: true };\n    } catch (err) {\n      console.error('Error deleting video story:', err);\n      const errorMessage = err instanceof Error ? err.message : 'Erreur inconnue';\n      setError(errorMessage);\n      return { success: false, error: errorMessage };\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return { createVideoStory, updateVideoStory, deleteVideoStory, loading, error };\n};"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2252, "column": 0}, "map": {"version":3,"sources":["file:///c:/Users/HP/projects/fimaWebsite/src/hooks/useBlogs.ts"],"sourcesContent":["import { useState, useEffect } from 'react';\nimport { projectId, publicAnonKey } from '../utils/supabase/info';\n\n// Types pour les blogs bas√©s sur Types.md\nexport interface Blog {\n  id: string;\n  titleFr: string;\n  titleEn: string;\n  slug: string;\n  summaryFr: string;\n  summaryEn: string;\n  contentFr: string;\n  contentEn: string;\n  author: string;\n  category: string;\n  tags: string[];\n  featuredImage: string;\n  published: boolean;\n  publishedDate?: string;\n  createdAt: string;\n  updatedAt?: string;\n  readTime: number;\n  views?: number;\n  likes?: number;\n}\n\nconst API_BASE_URL = `https://${projectId}.supabase.co/functions/v1/make-server-98c6ec1c`;\n\n/**\n * Hook pour r√©cup√©rer les blogs depuis l'API backend\n * @param locale - Langue actuelle ('fr' ou 'en')\n * @param category - Cat√©gorie optionnelle pour filtrer\n * @param publishedOnly - Afficher uniquement les articles publi√©s\n */\nexport const useBlogs = (locale: 'fr' | 'en' = 'fr', category?: string, publishedOnly: boolean = true) => {\n  const [blogs, setBlogs] = useState<Blog[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n\n  const fetchBlogs = async () => {\n    try {\n      setLoading(true);\n      setError(null);\n\n      const url = new URL(`${API_BASE_URL}/blogs`);\n      \n      const response = await fetch(url.toString(), {\n        method: 'GET',\n        headers: {\n          'Authorization': `Bearer ${publicAnonKey}`,\n          'Content-Type': 'application/json',\n        },\n      });\n\n      if (!response.ok) {\n        throw new Error(`Erreur lors du chargement des blogs: ${response.statusText}`);\n      }\n\n      const result = await response.json();\n      \n      if (!result.success) {\n        throw new Error(result.error || 'Erreur lors du chargement des blogs');\n      }\n\n      let blogsData: Blog[] = result.data || [];\n\n      // Filtrer par cat√©gorie si sp√©cifi√©\n      if (category && category !== 'all') {\n        blogsData = blogsData.filter(blog => blog.category === category);\n      }\n\n      // Filtrer les articles publi√©s uniquement si demand√©\n      if (publishedOnly) {\n        blogsData = blogsData.filter(blog => blog.published);\n      }\n\n      // Trier par date de publication d√©croissante\n      blogsData.sort((a, b) => {\n        const dateA = new Date(a.publishedDate || a.createdAt).getTime();\n        const dateB = new Date(b.publishedDate || b.createdAt).getTime();\n        return dateB - dateA;\n      });\n\n      setBlogs(blogsData);\n    } catch (err) {\n      console.error('Error fetching blogs:', err);\n      const errorMessage = err instanceof Error ? err.message : 'Erreur inconnue';\n      \n      // Si c'est une erreur de r√©seau (Failed to fetch), donner plus de d√©tails\n      if (errorMessage.includes('Failed to fetch')) {\n        setError('Impossible de se connecter au serveur. Veuillez v√©rifier que le serveur backend est d√©marr√©.');\n      } else {\n        setError(errorMessage);\n      }\n      \n      setBlogs([]);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  useEffect(() => {\n    fetchBlogs();\n  }, [locale, category, publishedOnly]);\n\n  return { blogs, loading, error, refetch: fetchBlogs };\n};\n\n/**\n * Hook pour r√©cup√©rer un blog par son slug\n * @param slug - Slug du blog\n * @param locale - Langue actuelle ('fr' ou 'en')\n */\nexport const useBlog = (slug: string, locale: 'fr' | 'en' = 'fr') => {\n  const [blog, setBlog] = useState<Blog | null>(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n\n  useEffect(() => {\n    const fetchBlog = async () => {\n      try {\n        setLoading(true);\n        setError(null);\n\n        const response = await fetch(`${API_BASE_URL}/blogs/${slug}`, {\n          method: 'GET',\n          headers: {\n            'Authorization': `Bearer ${publicAnonKey}`,\n            'Content-Type': 'application/json',\n          },\n        });\n\n        if (!response.ok) {\n          throw new Error(`Erreur lors du chargement du blog: ${response.statusText}`);\n        }\n\n        const result = await response.json();\n        \n        if (!result.success) {\n          throw new Error(result.error || 'Blog non trouv√©');\n        }\n\n        setBlog(result.data);\n      } catch (err) {\n        console.error('Error fetching blog:', err);\n        setError(err instanceof Error ? err.message : 'Erreur inconnue');\n        setBlog(null);\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    if (slug) {\n      fetchBlog();\n    }\n  }, [slug, locale]);\n\n  return { blog, loading, error };\n};\n\n/**\n * Hook pour cr√©er ou mettre √† jour un blog\n */\nexport const useBlogMutation = () => {\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n\n  const createBlog = async (blogData: Omit<Blog, 'id' | 'createdAt' | 'views' | 'likes'>) => {\n    try {\n      setLoading(true);\n      setError(null);\n\n      const response = await fetch(`${API_BASE_URL}/blogs`, {\n        method: 'POST',\n        headers: {\n          'Authorization': `Bearer ${publicAnonKey}`,\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify(blogData),\n      });\n\n      if (!response.ok) {\n        throw new Error(`Erreur lors de la cr√©ation du blog: ${response.statusText}`);\n      }\n\n      const result = await response.json();\n      \n      if (!result.success) {\n        throw new Error(result.error || 'Erreur lors de la cr√©ation du blog');\n      }\n\n      return { success: true, data: result.data };\n    } catch (err) {\n      console.error('Error creating blog:', err);\n      const errorMessage = err instanceof Error ? err.message : 'Erreur inconnue';\n      setError(errorMessage);\n      return { success: false, error: errorMessage };\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const updateBlog = async (id: string, blogData: Partial<Blog>) => {\n    try {\n      setLoading(true);\n      setError(null);\n\n      const response = await fetch(`${API_BASE_URL}/blogs/${id}`, {\n        method: 'PUT',\n        headers: {\n          'Authorization': `Bearer ${publicAnonKey}`,\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify(blogData),\n      });\n\n      if (!response.ok) {\n        throw new Error(`Erreur lors de la mise √† jour du blog: ${response.statusText}`);\n      }\n\n      const result = await response.json();\n      \n      if (!result.success) {\n        throw new Error(result.error || 'Erreur lors de la mise √† jour du blog');\n      }\n\n      return { success: true, data: result.data };\n    } catch (err) {\n      console.error('Error updating blog:', err);\n      const errorMessage = err instanceof Error ? err.message : 'Erreur inconnue';\n      setError(errorMessage);\n      return { success: false, error: errorMessage };\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const deleteBlog = async (id: string) => {\n    try {\n      setLoading(true);\n      setError(null);\n\n      const response = await fetch(`${API_BASE_URL}/blogs/${id}`, {\n        method: 'DELETE',\n        headers: {\n          'Authorization': `Bearer ${publicAnonKey}`,\n          'Content-Type': 'application/json',\n        },\n      });\n\n      if (!response.ok) {\n        throw new Error(`Erreur lors de la suppression du blog: ${response.statusText}`);\n      }\n\n      const result = await response.json();\n      \n      if (!result.success) {\n        throw new Error(result.error || 'Erreur lors de la suppression du blog');\n      }\n\n      return { success: true };\n    } catch (err) {\n      console.error('Error deleting blog:', err);\n      const errorMessage = err instanceof Error ? err.message : 'Erreur inconnue';\n      setError(errorMessage);\n      return { success: false, error: errorMessage };\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return { createBlog, updateBlog, deleteBlog, loading, error };\n};"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2511, "column": 0}, "map": {"version":3,"sources":["file:///c:/Users/HP/projects/fimaWebsite/src/hooks/useTestimonials.ts"],"sourcesContent":["import { useState, useEffect } from 'react';\nimport { projectId, publicAnonKey } from '../utils/supabase/info';\n\n// Types pour les testimonials bas√©s sur Types.md\nexport interface Testimonial {\n  id: string;\n  clientName: string;\n  clientPosition: string;\n  clientCompany: string;\n  clientLocation: string;\n  clientPhoto?: string;\n  testimonialFr: string;\n  testimonialEn: string;\n  rating: 1 | 2 | 3 | 4 | 5;\n  project?: string;\n  projectId?: string;\n  category: string;\n  featured?: boolean;\n  published: boolean;\n  publishedDate?: string;\n  videoUrl?: string;\n  createdAt: string;\n  updatedAt?: string;\n}\n\nconst API_BASE_URL = `https://${projectId}.supabase.co/functions/v1/make-server-98c6ec1c`;\n\n/**\n * Hook pour r√©cup√©rer les testimonials depuis l'API backend\n * @param locale - Langue actuelle ('fr' ou 'en')\n * @param category - Cat√©gorie optionnelle pour filtrer\n * @param featuredOnly - Afficher uniquement les testimonials mis en avant\n * @param publishedOnly - Afficher uniquement les testimonials publi√©s\n */\nexport const useTestimonials = (\n  locale: 'fr' | 'en' = 'fr',\n  category?: string,\n  featuredOnly: boolean = false,\n  publishedOnly: boolean = true\n) => {\n  const [testimonials, setTestimonials] = useState<Testimonial[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n\n  const fetchTestimonials = async () => {\n      try {\n        setLoading(true);\n        setError(null);\n\n        const url = new URL(`${API_BASE_URL}/testimonials`);\n        \n        // Ajouter les param√®tres de filtrage\n        if (category) {\n          url.searchParams.append('category', category);\n        }\n        if (featuredOnly) {\n          url.searchParams.append('featured', 'true');\n        }\n        \n        const response = await fetch(url.toString(), {\n          method: 'GET',\n          headers: {\n            'Authorization': `Bearer ${publicAnonKey}`,\n            'Content-Type': 'application/json',\n          },\n        });\n\n        if (!response.ok) {\n          console.error(`Testimonials API error: ${response.status} ${response.statusText}`);\n          // Ne pas throw l'erreur, juste retourner un tableau vide\n          setTestimonials([]);\n          setError(`Erreur API: ${response.statusText}. Veuillez initialiser les donn√©es depuis le CMS.`);\n          setLoading(false);\n          return;\n        }\n\n        const result = await response.json();\n        \n        // DEBUG: Afficher ce qui est retourn√© par l'API\n        console.log('üîç Testimonials API Response:', result);\n        console.log('üîç Number of testimonials:', result.data?.length);\n        \n        if (!result.success) {\n          console.error('Testimonials API returned error:', result.error);\n          setTestimonials([]);\n          setError(result.error || 'Aucune donn√©e disponible. Veuillez initialiser les testimonials depuis le CMS.');\n          setLoading(false);\n          return;\n        }\n\n        let testimonialsData: Testimonial[] = result.data || [];\n\n        // Filtrer les testimonials publi√©s uniquement si demand√©\n        if (publishedOnly) {\n          testimonialsData = testimonialsData.filter(t => t.published);\n        }\n\n        // Trier par date de publication d√©croissante, puis par featured\n        testimonialsData.sort((a, b) => {\n          // Featured first\n          if (a.featured && !b.featured) return -1;\n          if (!a.featured && b.featured) return 1;\n          \n          // Then by date\n          const dateA = new Date(a.publishedDate || a.createdAt).getTime();\n          const dateB = new Date(b.publishedDate || b.createdAt).getTime();\n          return dateB - dateA;\n        });\n\n        setTestimonials(testimonialsData);\n      } catch (err) {\n        console.error('Error fetching testimonials:', err);\n        const errorMessage = err instanceof Error ? err.message : 'Erreur de connexion au serveur';\n        setError(errorMessage);\n        setTestimonials([]);\n      } finally {\n        setLoading(false);\n      }\n    };\n\n  useEffect(() => {\n    fetchTestimonials();\n  }, [locale, category, featuredOnly, publishedOnly]);\n\n  return { testimonials, loading, error, refetch: fetchTestimonials };\n};\n\n/**\n * Hook pour r√©cup√©rer un testimonial par son ID\n * @param id - ID du testimonial\n * @param locale - Langue actuelle ('fr' ou 'en')\n */\nexport const useTestimonial = (id: string, locale: 'fr' | 'en' = 'fr') => {\n  const [testimonial, setTestimonial] = useState<Testimonial | null>(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n\n  useEffect(() => {\n    const fetchTestimonial = async () => {\n      try {\n        setLoading(true);\n        setError(null);\n\n        const response = await fetch(`${API_BASE_URL}/testimonials/${id}`, {\n          method: 'GET',\n          headers: {\n            'Authorization': `Bearer ${publicAnonKey}`,\n            'Content-Type': 'application/json',\n          },\n        });\n\n        if (!response.ok) {\n          throw new Error(`Erreur lors du chargement du testimonial: ${response.statusText}`);\n        }\n\n        const result = await response.json();\n        \n        if (!result.success) {\n          throw new Error(result.error || 'Testimonial non trouv√©');\n        }\n\n        setTestimonial(result.data);\n      } catch (err) {\n        console.error('Error fetching testimonial:', err);\n        setError(err instanceof Error ? err.message : 'Erreur inconnue');\n        setTestimonial(null);\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    if (id) {\n      fetchTestimonial();\n    }\n  }, [id, locale]);\n\n  return { testimonial, loading, error };\n};\n\n/**\n * Hook pour cr√©er ou mettre √† jour un testimonial\n */\nexport const useTestimonialMutation = () => {\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n\n  const createTestimonial = async (testimonialData: Omit<Testimonial, 'id' | 'createdAt'>) => {\n    try {\n      setLoading(true);\n      setError(null);\n\n      const response = await fetch(`${API_BASE_URL}/testimonials`, {\n        method: 'POST',\n        headers: {\n          'Authorization': `Bearer ${publicAnonKey}`,\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify(testimonialData),\n      });\n\n      if (!response.ok) {\n        throw new Error(`Erreur lors de la cr√©ation du testimonial: ${response.statusText}`);\n      }\n\n      const result = await response.json();\n      \n      if (!result.success) {\n        throw new Error(result.error || 'Erreur lors de la cr√©ation du testimonial');\n      }\n\n      return { success: true, data: result.data };\n    } catch (err) {\n      console.error('Error creating testimonial:', err);\n      const errorMessage = err instanceof Error ? err.message : 'Erreur inconnue';\n      setError(errorMessage);\n      return { success: false, error: errorMessage };\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const updateTestimonial = async (id: string, testimonialData: Partial<Testimonial>) => {\n    try {\n      setLoading(true);\n      setError(null);\n\n      const response = await fetch(`${API_BASE_URL}/testimonials/${id}`, {\n        method: 'PUT',\n        headers: {\n          'Authorization': `Bearer ${publicAnonKey}`,\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify(testimonialData),\n      });\n\n      if (!response.ok) {\n        throw new Error(`Erreur lors de la mise √† jour du testimonial: ${response.statusText}`);\n      }\n\n      const result = await response.json();\n      \n      if (!result.success) {\n        throw new Error(result.error || 'Erreur lors de la mise √† jour du testimonial');\n      }\n\n      return { success: true, data: result.data };\n    } catch (err) {\n      console.error('Error updating testimonial:', err);\n      const errorMessage = err instanceof Error ? err.message : 'Erreur inconnue';\n      setError(errorMessage);\n      return { success: false, error: errorMessage };\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const deleteTestimonial = async (id: string) => {\n    try {\n      setLoading(true);\n      setError(null);\n\n      const response = await fetch(`${API_BASE_URL}/testimonials/${id}`, {\n        method: 'DELETE',\n        headers: {\n          'Authorization': `Bearer ${publicAnonKey}`,\n          'Content-Type': 'application/json',\n        },\n      });\n\n      if (!response.ok) {\n        throw new Error(`Erreur lors de la suppression du testimonial: ${response.statusText}`);\n      }\n\n      const result = await response.json();\n      \n      if (!result.success) {\n        throw new Error(result.error || 'Erreur lors de la suppression du testimonial');\n      }\n\n      return { success: true };\n    } catch (err) {\n      console.error('Error deleting testimonial:', err);\n      const errorMessage = err instanceof Error ? err.message : 'Erreur inconnue';\n      setError(errorMessage);\n      return { success: false, error: errorMessage };\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return { createTestimonial, updateTestimonial, deleteTestimonial, loading, error };\n};"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2785, "column": 0}, "map": {"version":3,"sources":["file:///c:/Users/HP/projects/fimaWebsite/src/hooks/useNewsletter.ts"],"sourcesContent":["import { useState, useEffect } from 'react';\nimport { projectId, publicAnonKey } from '../utils/supabase/info';\n\n// Types pour la newsletter\nexport interface NewsletterSubscriber {\n  id: string;\n  email: string;\n  subscribedAt: string;\n  active: boolean;\n  preferences?: {\n    couchage?: boolean;\n    design?: boolean;\n    glass?: boolean;\n  };\n}\n\nexport interface NewsletterStats {\n  totalSubscribers: number;\n  activeSubscribers: number;\n  lastUpdated: string;\n}\n\nconst API_BASE_URL = `https://${projectId}.supabase.co/functions/v1/make-server-98c6ec1c`;\n\n// Statistiques par d√©faut pour fallback\nconst DEFAULT_NEWSLETTER_STATS: NewsletterStats = {\n  totalSubscribers: 2500,\n  activeSubscribers: 2500,\n  lastUpdated: new Date().toISOString()\n};\n\n/**\n * Hook pour r√©cup√©rer les statistiques de la newsletter\n */\nexport const useNewsletterStats = () => {\n  const [stats, setStats] = useState<NewsletterStats | null>(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n\n  useEffect(() => {\n    const fetchStats = async () => {\n      try {\n        setLoading(true);\n        setError(null);\n\n        try {\n          const response = await fetch(`${API_BASE_URL}/newsletter/stats`, {\n            method: 'GET',\n            headers: {\n              'Authorization': `Bearer ${publicAnonKey}`,\n              'Content-Type': 'application/json',\n            },\n          });\n\n          if (response.ok) {\n            const result = await response.json();\n            \n            if (result.success && result.data) {\n              setStats(result.data);\n              return;\n            }\n          }\n        } catch (fetchErr) {\n          console.log('Backend unavailable, using fallback stats:', fetchErr);\n        }\n\n        // Utiliser les statistiques par d√©faut si l'API √©choue\n        console.log('Using default newsletter stats');\n        setStats(DEFAULT_NEWSLETTER_STATS);\n      } catch (err) {\n        console.error('Error fetching newsletter stats:', err);\n        // M√™me en cas d'erreur, utiliser les stats par d√©faut\n        setStats(DEFAULT_NEWSLETTER_STATS);\n        setError(null); // Ne pas afficher d'erreur car on a les stats par d√©faut\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    fetchStats();\n  }, []);\n\n  return { stats, loading, error };\n};\n\n/**\n * Hook pour g√©rer les inscriptions √† la newsletter\n */\nexport const useNewsletterSubscription = () => {\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n\n  const subscribe = async (email: string, preferences?: NewsletterSubscriber['preferences']) => {\n    try {\n      setLoading(true);\n      setError(null);\n\n      // Validation de l'email\n      const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\n      if (!emailRegex.test(email)) {\n        throw new Error('Adresse email invalide');\n      }\n\n      try {\n        const response = await fetch(`${API_BASE_URL}/newsletter/subscribe`, {\n          method: 'POST',\n          headers: {\n            'Authorization': `Bearer ${publicAnonKey}`,\n            'Content-Type': 'application/json',\n          },\n          body: JSON.stringify({ email, preferences }),\n        });\n\n        if (response.ok) {\n          const result = await response.json();\n          \n          if (result.success) {\n            return { success: true, data: result.data };\n          }\n        }\n      } catch (fetchErr) {\n        console.log('Backend unavailable for subscription:', fetchErr);\n      }\n\n      // Si le backend n'est pas disponible, simuler le succ√®s\n      console.log('Simulating successful subscription (backend unavailable)');\n      return { \n        success: true, \n        data: {\n          id: `sim-${Date.now()}`,\n          email,\n          subscribedAt: new Date().toISOString(),\n          active: true,\n          preferences: preferences || { couchage: true, design: true, glass: true }\n        }\n      };\n    } catch (err) {\n      console.error('Error subscribing to newsletter:', err);\n      const errorMessage = err instanceof Error ? err.message : 'Erreur inconnue';\n      setError(errorMessage);\n      return { success: false, error: errorMessage };\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const unsubscribe = async (email: string) => {\n    try {\n      setLoading(true);\n      setError(null);\n\n      try {\n        const response = await fetch(`${API_BASE_URL}/newsletter/unsubscribe`, {\n          method: 'POST',\n          headers: {\n            'Authorization': `Bearer ${publicAnonKey}`,\n            'Content-Type': 'application/json',\n          },\n          body: JSON.stringify({ email }),\n        });\n\n        if (response.ok) {\n          const result = await response.json();\n          \n          if (result.success) {\n            return { success: true };\n          }\n        }\n      } catch (fetchErr) {\n        console.log('Backend unavailable for unsubscription:', fetchErr);\n      }\n\n      // Si le backend n'est pas disponible, simuler le succ√®s\n      console.log('Simulating successful unsubscription (backend unavailable)');\n      return { success: true };\n    } catch (err) {\n      console.error('Error unsubscribing from newsletter:', err);\n      const errorMessage = err instanceof Error ? err.message : 'Erreur inconnue';\n      setError(errorMessage);\n      return { success: false, error: errorMessage };\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return { subscribe, unsubscribe, loading, error };\n};"],"names":[],"mappings":"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"}}]
}